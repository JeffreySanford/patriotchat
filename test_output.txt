
 NX   Running target test for 5 projects:

- api-gateway
- auth
- frontend
- api-e2e
- @patriotchat/shared



> nx run @patriotchat/shared:test

> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/repos/patriotchat/libs/shared[39m

 [32mâœ“[39m src/index.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 31[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m2 passed[39m[22m[90m (2)[39m
[2m   Start at [22m 10:15:36
[2m   Duration [22m 207ms[2m (transform 49ms, setup 0ms, import 35ms, tests 31ms, environment 0ms)[22m


> nx run frontend:test

> pnpm vitest run --config vitest.config.ts --coverage


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/repos/patriotchat[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32mâœ“[39m apps/frontend/src/app/components/footer/footer.component.spec.ts [2m([22m[2m42 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/auth/auth.component.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/app.component.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/sidebar-nav/sidebar-nav.component.spec.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/header/header.component.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/dashboard/dashboard.component.spec.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/song-length-dialog/song-length-dialog.component.spec.ts [2m([22m[2m54 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/analytics.service.spec.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/inference.service.spec.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/auth.service.spec.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/health.service.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/websocket-health.service.spec.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 12[2mms[22m[39m

[2m Test Files [22m [1m[32m12 passed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[32m293 passed[39m[22m[90m (293)[39m
[2m   Start at [22m 10:15:37
[2m   Duration [22m 1.91s[2m (transform 1.08s, setup 8.77s, import 1.13s, tests 150ms, environment 7.06s)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
[31;1mAll files         [0m | [31;1m  12.73[0m | [31;1m    1.29[0m | [31;1m   8.69[0m | [31;1m   9.93[0m | [31;1m                 [0m 
[31;1m app/services     [0m | [31;1m  12.17[0m | [31;1m    1.29[0m | [31;1m   8.69[0m | [31;1m   9.33[0m | [31;1m                 [0m 
[31;1m  ...cs.service.ts[0m | [31;1m  28.57[0m | [32;1m     100[0m | [31;1m      0[0m | [31;1m  16.66[0m | [31;1m20-35            [0m 
[31;1m  auth.service.ts [0m | [31;1m   4.87[0m | [31;1m       0[0m | [31;1m      0[0m | [31;1m    2.5[0m | [31;1m27-135           [0m 
[31;1m  ...th.service.ts[0m | [31;1m   9.09[0m | [31;1m       0[0m | [31;1m      0[0m | [31;1m   4.76[0m | [31;1m25-107           [0m 
[31;1m  ...ce.service.ts[0m | [31;1m  33.33[0m | [32;1m     100[0m | [31;1m      0[0m | [31;1m     20[0m | [31;1m23-44            [0m 
[31;1m  ...th.service.ts[0m | [31;1m  13.75[0m | [31;1m    1.81[0m | [31;1m     20[0m | [31;1m  12.82[0m | [31;1m...61-163,172-284[0m 
[32;1m environments     [0m | [32;1m    100[0m | [32;1m     100[0m | [32;1m    100[0m | [32;1m    100[0m | [33;1m                 [0m 
[32;1m  environment.ts  [0m | [32;1m    100[0m | [32;1m     100[0m | [32;1m    100[0m | [32;1m    100[0m | [33;1m                 [0m 
-------------------|---------|----------|---------|---------|-------------------

> nx run api-gateway:test

> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/repos/patriotchat/apps/services/api-gateway[39m

 [32mâœ“[39m src/app.controller.spec.ts [2m([22m[2m85 tests[22m[2m)[22m[32m 54[2mms[22m[39m
 [32mâœ“[39m src/rate-limiting/rate-limiting.module.spec.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m src/health/health.gateway.spec.ts [2m([22m[2m78 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/rate-limiting/rate-limiting.service.spec.ts [2m([22m[2m54 tests[22m[2m)[22m[32m 27[2mms[22m[39m
[90mstderr[2m | src/rate-limiting/rate-limiting.guard.spec.ts[2m > [22m[2mRateLimitingGuard[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing request gracefully
[22m[39mRate limiting guard error: Invalid request context

[90mstderr[2m | src/rate-limiting/rate-limiting.guard.spec.ts[2m > [22m[2mRateLimitingGuard[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors gracefully
[22m[39mRate limiting guard error: Service error

[90mstderr[2m | src/rate-limiting/rate-limiting.guard.spec.ts[2m > [22m[2mRateLimitingGuard[2m > [22m[2mError Handling[2m > [22m[2mshould default to allowing on non-critical errors
[22m[39mRate limiting guard error: Database error

 [32mâœ“[39m src/rate-limiting/rate-limiting.guard.spec.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 20384  - [39m02/05/2026, 10:15:38 AM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
 [32mâœ“[39m src/health/backend-health.service.spec.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 15[2mms[22m[39m
[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould be defined
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould have getModels method
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould retrieve available models
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould support llama2 model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould support mistral model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould support neural-chat model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould return Observable of models
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould handle model list errors
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould have generateInference method
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould accept inference request
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould accept inference request
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould support context in request
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould generate response for valid model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould return inference result
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould return Observable of response
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation[2m > [22m[2mshould validate model name
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation[2m > [22m[2mshould reject invalid model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation[2m > [22m[2mshould handle missing model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Format[2m > [22m[2mshould return result text
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Format[2m > [22m[2mshould return model name in response
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Format[2m > [22m[2mshould return token count
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Format[2m > [22m[2mshould return generation duration
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling[2m > [22m[2mshould handle model fetch errors
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling[2m > [22m[2mshould handle inference errors
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling[2m > [22m[2mshould handle timeout errors
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling[2m > [22m[2mshould handle service unavailable
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mPerformance[2m > [22m[2mshould cache model list
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mPerformance[2m > [22m[2mshould handle concurrent requests
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mPerformance[2m > [22m[2mshould have reasonable timeout
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

 [32mâœ“[39m src/inference/inference.service.spec.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 10[2mms[22m[39m
[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould be defined
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould have trackEvent method
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould accept event payload
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould accept event payload
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.136Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould call service.trackEvent
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould call service.trackEvent
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.137Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould return success response
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould return success response
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.138Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track inference events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track inference events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'inference'[39m,
  user_id: [32m'user123'[39m,
  model: [32m'llama2'[39m,
  tokens: [33m50[39m,
  duration: [33m100[39m,
  timestamp: [32m'2026-02-05T16:15:39.139Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track error events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track error events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'error'[39m,
  user_id: [32m'user123'[39m,
  error_message: [32m'Model not found'[39m,
  error_code: [32m'MODEL_NOT_FOUND'[39m,
  timestamp: [32m'2026-02-05T16:15:39.139Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track logout events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track logout events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'logout'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.140Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould include metadata in tracking
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould include metadata in tracking
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'custom_event'[39m,
  user_id: [32m'user123'[39m,
  metadata: { action: [32m'button_click'[39m, button_id: [32m'submit'[39m },
  timestamp: [32m'2026-02-05T16:15:39.141Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate event_type field
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate event_type field
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.142Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject missing event_type
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject missing event_type
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate user_id field
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate user_id field
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.143Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject missing user_id
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject missing user_id
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate timestamp format
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate timestamp format
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.143Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject invalid timestamp
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject invalid timestamp
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate event_type format
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate event_type format
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'valid_event_type'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.144Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject invalid event_type characters
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject invalid event_type characters
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject oversized payload
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject oversized payload
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.145Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle backend connection errors
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle backend connection errors
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.146Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould not expose database errors
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould not expose database errors
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.146Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle concurrent tracking requests
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle concurrent tracking requests
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user0'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user1'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user2'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user3'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user4'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user5'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user6'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user7'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user8'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user9'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould return success status
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould return success status
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould not expose internal details
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould not expose internal details
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.147Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould return consistent response format
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould return consistent response format
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mAuthorization[2m > [22m[2mshould require JWT authentication
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mAuthorization[2m > [22m[2mshould validate JWT token on requests
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mRate Limiting[2m > [22m[2mshould handle high-frequency tracking
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mRate Limiting[2m > [22m[2mshould handle high-frequency tracking
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.148Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.149Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mRate Limiting[2m > [22m[2mshould respect rate limits
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mRate Limiting[2m > [22m[2mshould respect rate limits
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.150Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mData Privacy[2m > [22m[2mshould not log sensitive data
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mData Privacy[2m > [22m[2mshould not expose user PII
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mData Privacy[2m > [22m[2mshould not expose user PII
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  email: [32m'user@example.com'[39m,
  timestamp: [32m'2026-02-05T16:15:39.151Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track login events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track login events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.151Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track logout events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track logout events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'logout'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.151Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track inference events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track inference events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'inference'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.151Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track error events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track error events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'error'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.152Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track signup events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track signup events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'signup'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.152Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track payment events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track payment events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'payment'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T16:15:39.152Z'[39m
}

 [32mâœ“[39m src/analytics/analytics.controller.spec.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mService Creation[2m > [22m[2mshould be defined
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould be defined
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mService Creation[2m > [22m[2mshould have trackEvent method
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track user login
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould have register method
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould accept registration DTO
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track user login
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track user logout
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track user logout
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould validate email format
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track inference event
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track inference event
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould hash password before storing
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track error event
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould return auth response with token
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track error event
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track custom event
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould have login method
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track custom event
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould accept metadata in event
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould accept login credentials
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould accept metadata in event
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould batch multiple events
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould validate email exists
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould batch multiple events
[22m[39m[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould verify password matches
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould handle rapid event tracking
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould generate JWT token on successful login
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould return user info with token
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould have validate method
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould verify JWT token
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould handle expired tokens
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould handle invalid tokens
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould extract user from valid token
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mError Handling[2m > [22m[2mshould handle registration errors
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mError Handling[2m > [22m[2mshould handle login errors
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mError Handling[2m > [22m[2mshould handle validation errors
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mSecurity[2m > [22m[2mshould never return password in response
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mSecurity[2m > [22m[2mshould use secure password hashing
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mSecurity[2m > [22m[2mshould not log sensitive information
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mSecurity[2m > [22m[2mshould validate JWT signature
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Data[2m > [22m[2mshould store user role
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Data[2m > [22m[2mshould store user tier
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Data[2m > [22m[2mshould assign unique user ID
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould handle rapid event tracking
[22m[39m[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould flush events when batch is full
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing event_type
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing user_id
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould return list of models
[22m[39mInferenceController: getModels called

 [32mâœ“[39m src/auth/auth.service.spec.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould handle invalid event type
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould handle service connection errors
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould retry failed events
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould not lose events on backend failure
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould validate timestamp format
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould call service.getModels
[22m[39mInferenceController: getModels called

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould validate timestamp format
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould handle invalid timestamp
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould validate user_id format
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould validate user_id format
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould reject oversized metadata
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould include llama2 in models
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mPerformance[2m > [22m[2mshould track events asynchronously
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mPerformance[2m > [22m[2mshould track events asynchronously
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mPerformance[2m > [22m[2mshould not impact application performance
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mPerformance[2m > [22m[2mshould handle high-frequency events
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould include mistral in models
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mData Privacy[2m > [22m[2mshould not expose sensitive data
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mData Privacy[2m > [22m[2mshould not store payment information
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould include neural-chat in models
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mData Privacy[2m > [22m[2mshould comply with GDPR
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould handle empty model list
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mIntegration[2m > [22m[2mshould send events to analytics backend
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mIntegration[2m > [22m[2mshould send events to analytics backend
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mIntegration[2m > [22m[2mshould use HTTP for event transmission
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mIntegration[2m > [22m[2mshould handle backend response
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould handle service errors on model fetch
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould handle service unavailable
[22m[39mInferenceController: getModels called

 [32mâœ“[39m src/analytics/analytics.service.spec.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould accept inference request
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Hello, how are you?'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould pass request to service
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test prompt'[39m, model: [32m'mistral'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould support context in request
[22m[39mInferenceController: generateInference called with body: {
  prompt: [32m'What did I say?'[39m,
  model: [32m'llama2'[39m,
  context: [32m'Earlier I said hello'[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould return result in response
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould return model in response
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould return token count in response
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould return duration in response
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould handle different models
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould handle different models
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'mistral'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould handle different models
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'neural-chat'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle invalid model
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'nonexistent'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle invalid model
[22m[39mInferenceController: error in generateInference: HttpException: Invalid model
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:393:17
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Invalid model'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle empty prompt
[22m[39mInferenceController: generateInference called with body: { prompt: [32m''[39m, model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle empty prompt
[22m[39mInferenceController: error in generateInference: HttpException: Prompt cannot be empty
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:413:13
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Prompt cannot be empty'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing prompt
[22m[39mInferenceController: generateInference called with body: { model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing prompt
[22m[39mInferenceController: error in generateInference: HttpException: Prompt is required
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:432:17
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Prompt is required'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle inference timeout
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle inference timeout
[22m[39mInferenceController: error in generateInference: HttpException: Request timeout
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:454:13
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Request timeout'[39m,
  status: [33m504[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors
[22m[39mInferenceController: error in generateInference: HttpException: Internal error
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:474:13
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Internal error'[39m,
  status: [33m500[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mRequest Validation[2m > [22m[2mshould validate prompt format
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Valid prompt'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject overly long prompt
[22m[39mInferenceController: generateInference called with body: {
  prompt: [32m'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'[39m,
  model: [32m'llama2'[39m
}

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject overly long prompt
[22m[39mInferenceController: error in generateInference: HttpException: Prompt too long
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:520:17
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Prompt too long'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mRequest Validation[2m > [22m[2mshould validate model format
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mResponse Format[2m > [22m[2mshould return Observable
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mResponse Format[2m > [22m[2mshould not expose internal errors
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mResponse Format[2m > [22m[2mshould not expose internal errors
[22m[39mInferenceController: error in generateInference: HttpException: Internal Server Error
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:584:13
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Internal Server Error'[39m,
  status: [33m500[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/auth/auth.controller.spec.ts[2m > [22m[2mAuthController[2m > [22m[2mLogin Endpoint[2m > [22m[2mshould return token on successful login
[22m[39m[AuthController] Login response: {
  hasToken: [33mtrue[39m,
  tokenLength: [33m9[39m,
  tokenValue: [32m'jwt.token...'[39m,
  result: {
    token: [32m'jwt.token'[39m,
    user: {
      id: [32m'user1'[39m,
      username: [32m'testuser'[39m,
      email: [32m'test@example.com'[39m,
      tier: [32m'free'[39m
    }
  }
}

 [32mâœ“[39m src/inference/inference.controller.spec.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 22[2mms[22m[39m
[90mstderr[2m | src/auth/auth.controller.spec.ts[2m > [22m[2mAuthController[2m > [22m[2mError Handling[2m > [22m[2mshould handle login errors
[22m[39mAuth controller login error: {
  statusCode: [33m500[39m,
  message: [32m'Login failed'[39m,
  err: Error: Invalid credentials
      at C:/repos/patriotchat/apps/services/api-gateway/src/auth/auth.controller.spec.ts:262:26
      at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
      at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
      at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
      at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
      at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
      at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\tap.js:18:20
      at OperatorSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
      at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
      at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
}

[90mstderr[2m | src/auth/auth.controller.spec.ts[2m > [22m[2mAuthController[2m > [22m[2mError Handling[2m > [22m[2mshould throw HttpException on service error
[22m[39mHttpException: User already exists
    at C:/repos/patriotchat/apps/services/api-gateway/src/auth/auth.controller.ts:36:15
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\OperatorSubscriber.js:43:21[90m)[39m
    at OperatorSubscriber.Subscriber.error [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Subscriber.js:60:18[90m)[39m
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:58[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27 {
  response: [32m'User already exists'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

 [32mâœ“[39m src/auth/auth.controller.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/app.module.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m

[2m Test Files [22m [1m[32m13 passed[39m[22m[90m (13)[39m
[2m      Tests [22m [1m[32m514 passed[39m[22m[90m (514)[39m
[2m   Start at [22m 10:15:37
[2m   Duration [22m 2.06s[2m (transform 2.30s, setup 0ms, import 11.29s, tests 253ms, environment 2ms)[22m


> nx run auth:test

> go test ./...

ok  	github.com/JeffreySanford/patriotchat/auth/src	(cached)
