
 NX   Running target test for 5 projects:

- api-gateway
- auth
- frontend
- api-e2e
- @patriotchat/shared



> nx run @patriotchat/shared:test

> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/repos/patriotchat/libs/shared[39m

 [32mâœ“[39m src/index.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 35[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m2 passed[39m[22m[90m (2)[39m
[2m   Start at [22m 12:31:47
[2m   Duration [22m 189ms[2m (transform 48ms, setup 0ms, import 29ms, tests 35ms, environment 0ms)[22m


> nx run frontend:test

> pnpm vitest run --config vitest.config.ts --coverage


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/repos/patriotchat[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32mâœ“[39m apps/frontend/src/app/components/footer/footer.component.spec.ts [2m([22m[2m42 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/sidebar-nav/sidebar-nav.component.spec.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/dashboard/dashboard.component.spec.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/song-length-dialog/song-length-dialog.component.spec.ts [2m([22m[2m54 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/auth/auth.component.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/analytics.service.spec.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/auth.service.spec.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/app.component.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/inference.service.spec.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/components/header/header.component.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/health.service.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m apps/frontend/src/app/services/websocket-health.service.spec.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 9[2mms[22m[39m

[2m Test Files [22m [1m[32m12 passed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[32m293 passed[39m[22m[90m (293)[39m
[2m   Start at [22m 12:31:47
[2m   Duration [22m 1.88s[2m (transform 555ms, setup 9.44s, import 674ms, tests 144ms, environment 6.74s)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
[31;1mAll files         [0m | [31;1m  12.73[0m | [31;1m    1.29[0m | [31;1m   8.69[0m | [31;1m   9.93[0m | [31;1m                 [0m 
[31;1m app/services     [0m | [31;1m  12.17[0m | [31;1m    1.29[0m | [31;1m   8.69[0m | [31;1m   9.33[0m | [31;1m                 [0m 
[31;1m  ...cs.service.ts[0m | [31;1m  28.57[0m | [32;1m     100[0m | [31;1m      0[0m | [31;1m  16.66[0m | [31;1m20-35            [0m 
[31;1m  auth.service.ts [0m | [31;1m   4.87[0m | [31;1m       0[0m | [31;1m      0[0m | [31;1m    2.5[0m | [31;1m27-135           [0m 
[31;1m  ...th.service.ts[0m | [31;1m   9.09[0m | [31;1m       0[0m | [31;1m      0[0m | [31;1m   4.76[0m | [31;1m25-107           [0m 
[31;1m  ...ce.service.ts[0m | [31;1m  33.33[0m | [32;1m     100[0m | [31;1m      0[0m | [31;1m     20[0m | [31;1m23-52            [0m 
[31;1m  ...th.service.ts[0m | [31;1m  13.75[0m | [31;1m    1.81[0m | [31;1m     20[0m | [31;1m  12.82[0m | [31;1m...61-163,172-284[0m 
[32;1m environments     [0m | [32;1m    100[0m | [32;1m     100[0m | [32;1m    100[0m | [32;1m    100[0m | [33;1m                 [0m 
[32;1m  environment.ts  [0m | [32;1m    100[0m | [32;1m     100[0m | [32;1m    100[0m | [32;1m    100[0m | [33;1m                 [0m 
-------------------|---------|----------|---------|---------|-------------------

> nx run auth:test

> go test ./...

ok  	github.com/JeffreySanford/patriotchat/auth/src	(cached)

> nx run api-gateway:test

> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/repos/patriotchat/apps/services/api-gateway[39m

 [32mâœ“[39m src/common/data-validation.spec.ts [2m([22m[2m58 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/health/websocket-health.spec.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/common/database-transactions.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 156[2mms[22m[39m
 [32mâœ“[39m src/app.controller.spec.ts [2m([22m[2m85 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m src/health/health.gateway.spec.ts [2m([22m[2m78 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/rate-limiting/rate-limiting.module.spec.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m src/rate-limiting/rate-limiting.service.spec.ts [2m([22m[2m54 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstderr[2m | src/rate-limiting/rate-limiting.guard.spec.ts[2m > [22m[2mRateLimitingGuard[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing request gracefully
[22m[39mRate limiting guard error: Invalid request context

[90mstderr[2m | src/rate-limiting/rate-limiting.guard.spec.ts[2m > [22m[2mRateLimitingGuard[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors gracefully
[22m[39mRate limiting guard error: Service error

[90mstderr[2m | src/rate-limiting/rate-limiting.guard.spec.ts[2m > [22m[2mRateLimitingGuard[2m > [22m[2mError Handling[2m > [22m[2mshould default to allowing on non-critical errors
[22m[39mRate limiting guard error: Database error

 [32mâœ“[39m src/rate-limiting/rate-limiting.guard.spec.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
[32m[Nest] 33168  - [39m02/05/2026, 12:31:49 PM [32m    LOG[39m [38;5;3m[BackendHealthService] [39m[32mInitialized with 2 services to monitor[39m
 [32mâœ“[39m src/health/backend-health.service.spec.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 14[2mms[22m[39m
[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould return list of models
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould call service.getModels
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould include llama2 in models
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould include mistral in models
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould include neural-chat in models
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould handle empty model list
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould handle service errors on model fetch
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mGET /inference/models[2m > [22m[2mshould handle service unavailable
[22m[39mInferenceController: getModels called

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould accept inference request
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Hello, how are you?'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould pass request to service
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test prompt'[39m, model: [32m'mistral'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould support context in request
[22m[39mInferenceController: generateInference called with body: {
  prompt: [32m'What did I say?'[39m,
  model: [32m'llama2'[39m,
  context: [32m'Earlier I said hello'[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould return result in response
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould return model in response
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould return token count in response
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould return duration in response
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould handle different models
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould handle different models
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'mistral'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mPOST /inference/generate[2m > [22m[2mshould handle different models
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'neural-chat'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle invalid model
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'nonexistent'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle invalid model
[22m[39mInferenceController: error in generateInference: HttpException: Invalid model
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:393:17
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Invalid model'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle empty prompt
[22m[39mInferenceController: generateInference called with body: { prompt: [32m''[39m, model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle empty prompt
[22m[39mInferenceController: error in generateInference: HttpException: Prompt cannot be empty
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:413:13
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Prompt cannot be empty'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing prompt
[22m[39mInferenceController: generateInference called with body: { model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing prompt
[22m[39mInferenceController: error in generateInference: HttpException: Prompt is required
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:432:17
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Prompt is required'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle inference timeout
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle inference timeout
[22m[39mInferenceController: error in generateInference: HttpException: Request timeout
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:454:13
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Request timeout'[39m,
  status: [33m504[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors
[22m[39mInferenceController: error in generateInference: HttpException: Internal error
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:474:13
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Internal error'[39m,
  status: [33m500[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mRequest Validation[2m > [22m[2mshould validate prompt format
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Valid prompt'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject overly long prompt
[22m[39mInferenceController: generateInference called with body: {
  prompt: [32m'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'[39m,
  model: [32m'llama2'[39m
}

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject overly long prompt
[22m[39mInferenceController: error in generateInference: HttpException: Prompt too long
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:520:17
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Prompt too long'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mRequest Validation[2m > [22m[2mshould validate model format
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mResponse Format[2m > [22m[2mshould return Observable
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstdout[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mResponse Format[2m > [22m[2mshould not expose internal errors
[22m[39mInferenceController: generateInference called with body: { prompt: [32m'Test'[39m, model: [32m'llama2'[39m }

[90mstderr[2m | src/inference/inference.controller.spec.ts[2m > [22m[2mInferenceController[2m > [22m[2mResponse Format[2m > [22m[2mshould not expose internal errors
[22m[39mInferenceController: error in generateInference: HttpException: Internal Server Error
    at C:/repos/patriotchat/apps/services/api-gateway/src/inference/inference.controller.spec.ts:584:13
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27
    at SafeSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m {
  response: [32m'Internal Server Error'[39m,
  status: [33m500[39m,
  options: [90mundefined[39m
}

 [32mâœ“[39m src/inference/inference.controller.spec.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 27[2mms[22m[39m
[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould be defined
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould have trackEvent method
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould accept event payload
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould accept event payload
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.446Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould call service.trackEvent
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould call service.trackEvent
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.448Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould return success response
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould return success response
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.449Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track inference events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track inference events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'inference'[39m,
  user_id: [32m'user123'[39m,
  model: [32m'llama2'[39m,
  tokens: [33m50[39m,
  duration: [33m100[39m,
  timestamp: [32m'2026-02-05T18:31:49.450Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track error events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track error events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'error'[39m,
  user_id: [32m'user123'[39m,
  error_message: [32m'Model not found'[39m,
  error_code: [32m'MODEL_NOT_FOUND'[39m,
  timestamp: [32m'2026-02-05T18:31:49.451Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track logout events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould track logout events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'logout'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.452Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould include metadata in tracking
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mPOST /analytics/track[2m > [22m[2mshould include metadata in tracking
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'custom_event'[39m,
  user_id: [32m'user123'[39m,
  metadata: { action: [32m'button_click'[39m, button_id: [32m'submit'[39m },
  timestamp: [32m'2026-02-05T18:31:49.453Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate event_type field
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate event_type field
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.455Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject missing event_type
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject missing event_type
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate user_id field
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate user_id field
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.456Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject missing user_id
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject missing user_id
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate timestamp format
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate timestamp format
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.458Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject invalid timestamp
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject invalid timestamp
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate event_type format
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould validate event_type format
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'valid_event_type'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.460Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject invalid event_type characters
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould be defined
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject invalid event_type characters
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject oversized payload
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mInput Validation[2m > [22m[2mshould reject oversized payload
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould have getModels method
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle service errors
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.462Z'[39m
}

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould retrieve available models
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle backend connection errors
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould support llama2 model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle backend connection errors
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.463Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould not expose database errors
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould not expose database errors
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.464Z'[39m
}

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould support mistral model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle concurrent tracking requests
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould support neural-chat model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mError Handling[2m > [22m[2mshould handle concurrent tracking requests
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user0'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user1'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user2'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user3'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user4'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user5'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user6'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user7'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user8'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user9'[39m,
  timestamp: [32m'2026-02-05T18:31:49.465Z'[39m
}

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould return Observable of models
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould return success status
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Management[2m > [22m[2mshould handle model list errors
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould return success status
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.466Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould not expose internal details
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould not expose internal details
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.467Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould return consistent response format
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould have generateInference method
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mResponse Format[2m > [22m[2mshould return consistent response format
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.467Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.467Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mAuthorization[2m > [22m[2mshould require JWT authentication
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mAuthorization[2m > [22m[2mshould validate JWT token on requests
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mRate Limiting[2m > [22m[2mshould handle high-frequency tracking
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould accept inference request
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould accept inference request
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould support context in request
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould generate response for valid model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould return inference result
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mInference Generation[2m > [22m[2mshould return Observable of response
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould validate model name
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould reject invalid model
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould handle missing model with default fallback
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould support neural-chat model selection
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould support neural-chat model selection
[22m[39m[InferenceService] Generating with model neural-chat: estimated 27s, timeout 60000ms
Generating inference with model neural-chat at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould support mistral model selection
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould support mistral model selection
[22m[39m[InferenceService] Generating with model mistral: estimated 35s, timeout 70000ms
Generating inference with model mistral at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould support llama2 model selection
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould be defined
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould support llama2 model selection
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould select optimized model based on prompt complexity
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mRate Limiting[2m > [22m[2mshould handle high-frequency tracking
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.469Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.470Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.471Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}
[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'ping'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.472Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mRate Limiting[2m > [22m[2mshould respect rate limits
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mRate Limiting[2m > [22m[2mshould respect rate limits
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.473Z'[39m
}

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mModel Validation & Selection[2m > [22m[2mshould select optimized model based on prompt complexity
[22m[39m[InferenceService] Generating with model neural-chat: estimated 27s, timeout 60000ms
Generating inference with model neural-chat at http://localhost:5000/inference/generate
[InferenceService] Generating with model llama2: estimated 86s, timeout 172000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould parse successful response from Ollama
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mData Privacy[2m > [22m[2mshould not log sensitive data
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould have register method
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould parse successful response from Ollama
[22m[39m[InferenceService] Generating with model mistral: estimated 35s, timeout 70000ms
Generating inference with model mistral at http://localhost:5000/inference/generate

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mData Privacy[2m > [22m[2mshould not expose user PII
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould extract response text from Ollama
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould extract response text from Ollama
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mData Privacy[2m > [22m[2mshould not expose user PII
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  email: [32m'user@example.com'[39m,
  timestamp: [32m'2026-02-05T18:31:49.474Z'[39m
}

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould handle streaming responses from Ollama
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track login events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould accept registration DTO
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track login events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'login'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.474Z'[39m
}

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould handle Ollama response timeout
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track logout events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track logout events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'logout'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.474Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track inference events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould handle Ollama response timeout
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track inference events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'inference'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.475Z'[39m
}

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould handle malformed Ollama response
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track error events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track error events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'error'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.475Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track signup events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould handle malformed Ollama response
[22m[39m[InferenceService] Generating with model mistral: estimated 35s, timeout 70000ms
Generating inference with model mistral at http://localhost:5000/inference/generate

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track signup events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'signup'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.475Z'[39m
}

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track payment events
[22m[39m[AnalyticsController] Constructor called
[AnalyticsController] Service type: object
[AnalyticsController] Service is: Object

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould validate response structure from Ollama
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.controller.spec.ts[2m > [22m[2mAnalyticsController[2m > [22m[2mEvent Types[2m > [22m[2mshould track payment events
[22m[39m[AnalyticsController] trackEvent called, service available: [33mtrue[39m
[AnalyticsController] Extracted userId: test-user-id
[AnalyticsController] Request body: {
  event_type: [32m'payment'[39m,
  user_id: [32m'user123'[39m,
  timestamp: [32m'2026-02-05T18:31:49.475Z'[39m
}

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mResponse Parsing from Ollama[2m > [22m[2mshould validate response structure from Ollama
[22m[39m[InferenceService] Generating with model mistral: estimated 35s, timeout 70000ms
Generating inference with model mistral at http://localhost:5000/inference/generate

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould validate email format
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould count tokens in response
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould count tokens in response
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould respect maximum token limit
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

 [32mâœ“[39m src/analytics/analytics.controller.spec.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 35[2mms[22m[39m
[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould hash password before storing
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould handle context tokens correctly
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Registration[2m > [22m[2mshould return auth response with token
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould handle context tokens correctly
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould return token usage in response
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould return token usage in response
[22m[39m[InferenceService] Generating with model mistral: estimated 35s, timeout 70000ms
Generating inference with model mistral at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould calculate total tokens including input prompt
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould have login method
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould calculate total tokens including input prompt
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould accept login credentials
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould handle very long prompts near token limit
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mToken Counting & Limits[2m > [22m[2mshould handle very long prompts near token limit
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle model not found error
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould validate email exists
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.controller.spec.ts[2m > [22m[2mAuthController[2m > [22m[2mLogin Endpoint[2m > [22m[2mshould return token on successful login
[22m[39m[AuthController] Login response: {
  hasToken: [33mtrue[39m,
  tokenLength: [33m9[39m,
  tokenValue: [32m'jwt.token...'[39m,
  result: {
    token: [32m'jwt.token'[39m,
    user: {
      id: [32m'user1'[39m,
      username: [32m'testuser'[39m,
      email: [32m'test@example.com'[39m,
      tier: [32m'free'[39m
    }
  }
}

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould verify password matches
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle model not found error
[22m[39m[InferenceService] Generating with model xyz-model: estimated 35s, timeout 70000ms
Generating inference with model xyz-model at http://localhost:5000/inference/generate

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould retry on transient failures
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould generate JWT token on successful login
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle model out of memory
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Login[2m > [22m[2mshould return user info with token
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle model out of memory
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould have validate method
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle model loading failure
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould verify JWT token
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle model loading failure
[22m[39m[InferenceService] Generating with model mistral: estimated 35s, timeout 70000ms
Generating inference with model mistral at http://localhost:5000/inference/generate

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould handle expired tokens
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould provide fallback model on primary failure
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould handle invalid tokens
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould provide fallback model on primary failure
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mToken Validation[2m > [22m[2mshould extract user from valid token
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle Ollama service disconnection
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mError Handling[2m > [22m[2mshould handle registration errors
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mError Handling[2m > [22m[2mshould handle login errors
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle Ollama service disconnection
[22m[39m[InferenceService] Generating with model mistral: estimated 35s, timeout 70000ms
Generating inference with model mistral at http://localhost:5000/inference/generate

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mError Handling[2m > [22m[2mshould handle validation errors
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle inference service health check failure
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mSecurity[2m > [22m[2mshould never return password in response
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mSecurity[2m > [22m[2mshould use secure password hashing
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould handle inference service health check failure
[22m[39mFetching models from: http://localhost:5000/inference/models

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mSecurity[2m > [22m[2mshould not log sensitive information
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould recover gracefully after model failure
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mSecurity[2m > [22m[2mshould validate JWT signature
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mError Handling for Model Failures[2m > [22m[2mshould recover gracefully after model failure
[22m[39m[InferenceService] Generating with model llama2: estimated 43s, timeout 86000ms
Generating inference with model llama2 at http://localhost:5000/inference/generate

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Data[2m > [22m[2mshould store user role
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mPerformance[2m > [22m[2mshould cache model list
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Data[2m > [22m[2mshould store user tier
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/auth/auth.service.spec.ts[2m > [22m[2mAuthService[2m > [22m[2mUser Data[2m > [22m[2mshould assign unique user ID
[22m[39m[AuthService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mPerformance[2m > [22m[2mshould handle concurrent requests
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/inference/inference.service.spec.ts[2m > [22m[2mInferenceService[2m > [22m[2mPerformance[2m > [22m[2mshould have reasonable timeout
[22m[39m[InferenceService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/auth/auth.controller.spec.ts[2m > [22m[2mAuthController[2m > [22m[2mError Handling[2m > [22m[2mshould handle login errors
[22m[39mAuth controller login error: {
  statusCode: [33m500[39m,
  message: [32m'Login failed'[39m,
  err: Error: Invalid credentials
      at C:/repos/patriotchat/apps/services/api-gateway/src/auth/auth.controller.spec.ts:262:26
      at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:64[90m)[39m
      at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
      at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
      at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
      at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
      at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\tap.js:18:20
      at OperatorSubscriber.<anonymous> [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\lift.js:14:28[90m)[39m
      at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:30:30
      at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
}

 [32mâœ“[39m src/auth/auth.service.spec.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/inference/inference.service.spec.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 25[2mms[22m[39m
[90mstderr[2m | src/auth/auth.controller.spec.ts[2m > [22m[2mAuthController[2m > [22m[2mError Handling[2m > [22m[2mshould throw HttpException on service error
[22m[39mHttpException: User already exists
    at C:/repos/patriotchat/apps/services/api-gateway/src/auth/auth.controller.ts:36:15
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:13:51
    at OperatorSubscriber._this._error [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\OperatorSubscriber.js:43:21[90m)[39m
    at OperatorSubscriber.Subscriber.error [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Subscriber.js:60:18[90m)[39m
    at Observable.init [as _subscribe] [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\observable\throwError.js:8:58[90m)[39m
    at Observable._trySubscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:41:25[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:35:31
    at Object.errorContext [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\util\errorContext.js:22:9[90m)[39m
    at Observable.subscribe [90m(C:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\Observable.js:26:24[90m)[39m
    at [90mC:\repos\patriotchat\apps\services\api-gateway\[39mnode_modules\[4mrxjs[24m\dist\cjs\internal\operators\catchError.js:12:27 {
  response: [32m'User already exists'[39m,
  status: [33m400[39m,
  options: [90mundefined[39m
}

 [32mâœ“[39m src/auth/auth.controller.spec.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 19[2mms[22m[39m
[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mService Creation[2m > [22m[2mshould be defined
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mService Creation[2m > [22m[2mshould have trackEvent method
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track user login
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track user login
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track user logout
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track user logout
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track inference event
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track inference event
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track error event
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track error event
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track custom event
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould track custom event
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould accept metadata in event
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Tracking[2m > [22m[2mshould accept metadata in event
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould batch multiple events
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould batch multiple events
[22m[39m[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould handle rapid event tracking
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould handle rapid event tracking
[22m[39m[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking
[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Batching[2m > [22m[2mshould flush events when batch is full
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing event_type
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing user_id
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould handle invalid event type
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould handle service connection errors
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould retry failed events
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mError Handling[2m > [22m[2mshould not lose events on backend failure
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould validate timestamp format
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould validate timestamp format
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould handle invalid timestamp
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould validate user_id format
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould validate user_id format
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mEvent Validation[2m > [22m[2mshould reject oversized metadata
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mPerformance[2m > [22m[2mshould track events asynchronously
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mPerformance[2m > [22m[2mshould track events asynchronously
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mPerformance[2m > [22m[2mshould not impact application performance
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mPerformance[2m > [22m[2mshould handle high-frequency events
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mData Privacy[2m > [22m[2mshould not expose sensitive data
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mData Privacy[2m > [22m[2mshould not store payment information
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mData Privacy[2m > [22m[2mshould comply with GDPR
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mIntegration[2m > [22m[2mshould send events to analytics backend
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstderr[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mIntegration[2m > [22m[2mshould send events to analytics backend
[22m[39m[AnalyticsService] No userId provided, skipping event tracking

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mIntegration[2m > [22m[2mshould use HTTP for event transmission
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

[90mstdout[2m | src/analytics/analytics.service.spec.ts[2m > [22m[2mAnalyticsService[2m > [22m[2mIntegration[2m > [22m[2mshould handle backend response
[22m[39m[AnalyticsService] Constructor - HttpService available: [33mtrue[39m

 [32mâœ“[39m src/analytics/analytics.service.spec.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/app.module.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m src/common/cross-service-integration.spec.ts [2m([22m[2m31 tests[22m[2m)[22m[33m 4569[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle service timeout [33m 1012[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle slow service responses [33m 2007[2mms[22m[39m
       [33m[2mâœ“[22m[39m should propagate timeout from upstream service [33m 1509[2mms[22m[39m

[2m Test Files [22m [1m[32m17 passed[39m[22m[90m (17)[39m
[2m      Tests [22m [1m[32m678 passed[39m[22m[90m (678)[39m
[2m   Start at [22m 12:31:47
[2m   Duration [22m 5.09s[2m (transform 2.04s, setup 0ms, import 10.61s, tests 5.02s, environment 3ms)[22m


> nx run api-e2e:test


[0m[7m[1m[36m NX [39m[22m[27m[0m  Ensuring Playwright is installed.

use --skipInstall to skip installation.


=== E2E Test Suite Global Setup ===

Service Status:
  âœ— UNAVAILABLE: gateway (20ms)
  âœ— UNAVAILABLE: auth (10ms)
  âœ— UNAVAILABLE: funding (10ms)

âš ï¸  WARNING: No services are responding. E2E tests will likely fail.
To run E2E tests, ensure services are running:
  - API Gateway: localhost:3000
  - Auth Service: localhost:4001
  - Funding Service: localhost:4002
  - Policy Service: localhost:4003
  - LLM Service: localhost:4004
  - Analytics Service: localhost:4005

You can start services with: docker-compose up -d

  âœ— UNAVAILABLE: policy (10ms)
  âœ— UNAVAILABLE: llm (10ms)
  âœ— UNAVAILABLE: analytics (10ms)

Overall: 0/6 services healthy
=================================


[2mRunning [22m291[2m tests using [22m12[2m workers[22m

  [31mâœ˜[39m  [2m  7 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available[39m[2m (40ms)[22m
âœ“ All 10 concurrent requests succeeded
  [31mâœ˜[39m  [2m  1 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration[39m[2m (153ms)[22m
  [32mâœ“[39m  [2m  2 [22m[chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:7:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Connection Pooling â€º Should handle concurrent requests efficiently[2m (120ms)[22m
  [31mâœ˜[39m  [2m  3 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible)[39m[2m (115ms)[22m
  [31mâœ˜[39m  [2m  5 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries[39m[2m (111ms)[22m
  [31mâœ˜[39m  [2m 11 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy[39m[2m (41ms)[22m
âœ“ Model selector API operational
  [32mâœ“[39m  [2m 13 [22m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:42:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Model selector should be accessible via API[2m (8ms)[22m
âœ“ First spike succeeded (5 requests)
  [31mâœ˜[39m  [2m  9 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency[39m[2m (93ms)[22m
  [31mâœ˜[39m  [2m  6 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped[39m[2m (109ms)[22m
  [31mâœ˜[39m  [2m 12 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests[39m[2m (101ms)[22m
âœ“ Login logged for user: testuser_1770316311758_1@test.patriotchat.com
  [31mâœ˜[39m  [2m 10 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly[39m[2m (115ms)[22m
  [31mâœ˜[39m  [2m  4 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login[39m[2m (199ms)[22m
  [31mâœ˜[39m  [2m 14 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully[39m[2m (63ms)[22m
âœ“ Pool recovered - second spike succeeded (5 requests)
  [32mâœ“[39m  [2m  8 [22m[chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:39:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Connection Pooling â€º Connection pool should recover after spike[2m (278ms)[22m
  [31mâœ˜[39m  [2m 15 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms[39m[2m (9ms)[22m
  [31mâœ˜[39m  [2m 16 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models[39m[2m (31ms)[22m
âœ“ Available models: [object Object], [object Object], [object Object], [object Object]
âœ“ Model selector backend API available for frontend integration
  [32mâœ“[39m  [2m 18 [22m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:7:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should list available LLM models[2m (38ms)[22m
  [32mâœ“[39m  [2m 19 [22m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:223:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Model selector should be available on frontend[2m (35ms)[22m
âœ“ Avg latency: 1.63ms, Max: 2.49ms
  [31mâœ˜[39m  [2m 22 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available[39m[2m (35ms)[22m
  [32mâœ“[39m  [2m 25 [22m[chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:81:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º Should maintain consistent response times under load[2m (12ms)[22m
âœ“ Gateway latency: 29.14ms
  [31mâœ˜[39m  [2m 26 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational[39m[2m (10ms)[22m
  [32mâœ“[39m  [2m 23 [22m[chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:19:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º API Gateway should respond in under 100ms[2m (37ms)[22m
  [31mâœ˜[39m  [2m 17 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model[39m[2m (104ms)[22m
  [31mâœ˜[39m  [2m 27 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms[39m[2m (36ms)[22m
  [31mâœ˜[39m  [2m 21 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session[39m[2m (97ms)[22m
  [31mâœ˜[39m  [2m 20 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model[39m[2m (99ms)[22m
  [31mâœ˜[39m  [2m 28 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms[39m[2m (37ms)[22m
  [31mâœ˜[39m  [2m 24 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model[39m[2m (94ms)[22m
âœ“ Per-IP rate limiting configured (no block within 10 requests)
  [32mâœ“[39m  [2m 29 [22m[chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:53:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-IP Rate Limiting â€º Should limit requests from same IP[2m (81ms)[22m
  [31mâœ˜[39m  [2m 30 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window[39m[2m (70ms)[22m
LLM Service Latency:
  Average: 1.32ms
  Min: 1.01ms
  Max: 1.61ms
  [32mâœ“[39m  [2m 31 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:103:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure LLM service latency[2m (15ms)[22m
Concurrent Request Performance (10 requests):
  Total time: 8.84ms
  Average latency: 5.91ms
  Max latency: 7.42ms
  Throughput: 1131.82 req/s
  [31mâœ˜[39m  [2m 32 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms[39m[2m (27ms)[22m
  [32mâœ“[39m  [2m 33 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:153:9 â€º Performance Tests â€º Throughput Benchmarks â€º Should handle concurrent requests efficiently[2m (11ms)[22m
Health Check Response Times:
  Auth: 2.94ms
  Gateway: 3.81ms
  Funding: 3.91ms
  Policy: 4.05ms
  LLM: 1.61ms
  Analytics: 3.93ms
  [32mâœ“[39m  [2m 34 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:216:9 â€º Performance Tests â€º API Response Times â€º Health check responses should be fast[2m (27ms)[22m
âœ“ Available models (4): liberty-mistral-v1.0, mistral, llama2, neural-chat
  [32mâœ“[39m  [2m 35 [22m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:32:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should retrieve list of 4 available models[2m (7ms)[22m
âœ“ All models have required properties (id, name)
  [32mâœ“[39m  [2m 36 [22m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:56:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should have expected model properties[2m (21ms)[22m
âœ“ All expected models present: llama2, mistral, neural-chat
  [32mâœ“[39m  [2m 37 [22m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:89:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should include expected models: llama2, mistral, neural-chat[2m (8ms)[22m
  [31mâœ˜[39m  [2m 38 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model[39m[2m (119ms)[22m
  [31mâœ˜[39m  [2m 39 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms[39m[2m (30ms)[22m
Gateway Latency:
  Average: 4.95ms
  Min: 1.94ms
  Max: 24.48ms
  [32mâœ“[39m  [2m 42 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:31:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure gateway latency[2m (55ms)[22m
Auth Service Latency:
  Average: 3.41ms
  Min: 0.79ms
  Max: 21.29ms
  [32mâœ“[39m  [2m 44 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:7:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure auth service latency[2m (40ms)[22m
Funding Service Latency:
  Average: 4.12ms
  Min: 1.28ms
  Max: 21.78ms
Policy Service Latency:
  Average: 4.24ms
  Min: 1.54ms
  Max: 22.54ms
  [32mâœ“[39m  [2m 45 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:55:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure funding service latency[2m (49ms)[22m
  [31mâœ˜[39m  [2m 41 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user[39m[2m (95ms)[22m
  [31mâœ˜[39m  [2m 40 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers[39m[2m (93ms)[22m
  [32mâœ“[39m  [2m 47 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:79:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure policy service latency[2m (49ms)[22m
  [31mâœ˜[39m  [2m 43 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits[39m[2m (93ms)[22m
âœ“ Empty prompt correctly rejected
  [32mâœ“[39m  [2m 53 [22m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:405:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should handle empty prompt gracefully[2m (12ms)[22m
Analytics Service Latency:
  Average: 4.28ms
  Min: 1.51ms
  Max: 23.51ms
  [32mâœ“[39m  [2m 49 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:127:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure analytics service latency[2m (51ms)[22m
Database Query Performance:
  Average: 7.51ms
  [31mâœ˜[39m  [2m 46 [22m[31m[chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service[39m[2m (98ms)[22m
  [32mâœ“[39m  [2m 51 [22m[chromium] â€º apps\api-e2e\src\performance\service-latency.spec.ts:189:9 â€º Performance Tests â€º Database Query Performance â€º Should execute queries within acceptable time[2m (44ms)[22m
âœ“ Step 1: Loaded 4 models
âœ“ Step 2: Selected model - liberty-mistral-v1.0
  [31mâœ˜[39m  [2m 50 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests[39m[2m (89ms)[22m
  [31mâœ˜[39m  [2m 52 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model[39m[2m (79ms)[22m
  [31mâœ˜[39m  [2m 54 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query[39m[2m (68ms)[22m
âœ“ User registered: testuser_1770316314844_1@test.patriotchat.com
âœ“ Correctly rejected invalid password
âœ“ User recovered and logged in successfully
  [32mâœ“[39m  [2m 56 [22m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:7:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should recover from invalid login attempts[2m (191ms)[22m
âœ“ Invalid token correctly rejected
âœ“ Public endpoint accessible without token
âœ“ Invalid model correctly rejected with status: 500
  [32mâœ“[39m  [2m 63 [22m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:90:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle invalid token validation[2m (24ms)[22m
  [32mâœ“[39m  [2m 60 [22m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:384:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should return error for invalid model[2m (79ms)[22m
âœ“ Request without required field rejected
âœ“ Request with incomplete data rejected
  [32mâœ“[39m  [2m 66 [22m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:113:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle malformed request bodies[2m (27ms)[22m
âœ“ First registration succeeded
âœ“ User created in auth service
  [31mâœ˜[39m  [2m 69 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics[39m[2m (60ms)[22m
âœ“ Duplicate registration correctly rejected
  [32mâœ“[39m  [2m 64 [22m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:56:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle duplicate registration attempts[2m (135ms)[22m
âœ“ Registration succeeded (independent of analytics service)
âœ“ Login succeeded (independent of analytics service)
  [32mâœ“[39m  [2m 70 [22m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:391:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should continue functioning when non-critical service is slow[2m (125ms)[22m
âœ“ User registered (auth service operational)
  [31mâœ˜[39m  [2m 48 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 55 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 57 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 58 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 59 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 61 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 62 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 67 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 65 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 68 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 74 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration[39m[2m (95ms)[22m
  [31mâœ˜[39m  [2m 71 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable[39m[2m (30.0s)[22m
âœ“ Registration event should be captured: undefined
âœ“ Registration event telemetry accessible
  [32mâœ“[39m  [2m 75 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:7:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture user registration events[2m (110ms)[22m
  [31mâœ˜[39m  [2m 77 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available[39m[2m (13ms)[22m
âœ“ Login event should be captured
âœ“ Authentication event telemetry recorded
  [32mâœ“[39m  [2m 76 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:36:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture authentication events[2m (162ms)[22m
âœ“ Telemetry service connection maintained during registration
âœ“ Telemetry service operational
  [32mâœ“[39m  [2m 78 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:391:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should handle telemetry service connection[2m (62ms)[22m
âœ“ Step 1: User registered
âœ“ Step 2: User logged in
  [31mâœ˜[39m  [2m 72 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context[39m[2m (30.0s)[22m
âœ“ Multiple analytics events accepted
âœ“ Invalid telemetry event handled gracefully (status: 202)
âœ“ Analytics batch processing verified
  [32mâœ“[39m  [2m 83 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:201:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should handle invalid telemetry gracefully[2m (40ms)[22m
  [32mâœ“[39m  [2m 81 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:125:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should batch analytics events efficiently[2m (120ms)[22m
  [31mâœ˜[39m  [2m 82 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields[39m[2m (92ms)[22m
âœ“ User authenticated
âœ“ User registered
âœ“ Registration completed in 81ms (telemetry non-blocking)
  [32mâœ“[39m  [2m 84 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:271:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Performance â€º Should not block main request for telemetry[2m (87ms)[22m
  [31mâœ˜[39m  [2m 87 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow[39m[2m (66ms)[22m
âœ“ User logged in successfully
  [31mâœ˜[39m  [2m 86 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow[39m[2m (126ms)[22m
âœ“ Auth service: User registered
  [31mâœ˜[39m  [2m 89 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services[39m[2m (77ms)[22m
âœ“ High-volume analytics events handled successfully
  [32mâœ“[39m  [2m 88 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:297:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Performance â€º Should handle high-volume analytics events[2m (142ms)[22m
âœ“ Health endpoint operational
  [32mâœ“[39m  [2m 90 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:344:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should maintain health status endpoint[2m (40ms)[22m
  [31mâœ˜[39m  [2m 91 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly[39m[2m (69ms)[22m
âœ“ Consistent health metrics across checks
  [32mâœ“[39m  [2m 92 [22m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:370:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should provide consistent health metrics[2m (47ms)[22m
  [31mâœ˜[39m  [2m 93 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow[39m[2m (85ms)[22m
  [31mâœ˜[39m  [2m 94 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session[39m[2m (102ms)[22m
  [31mâœ˜[39m  [2m 95 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services[39m[2m (96ms)[22m
âœ“ Service handled response appropriately (status: 404)
  [32mâœ“[39m  [2m 96 [22m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:333:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should recover from service failures[2m (101ms)[22m
âœ“ Invalid credentials rejected (status: 401)
  [32mâœ“[39m  [2m 97 [22m[chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:298:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid credentials gracefully[2m (143ms)[22m
  [31mâœ˜[39m  [2m 99 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration[39m[2m (88ms)[22m
âœ“ Login logged for user: testuser_1770316349233_1@test.patriotchat.com
  [31mâœ˜[39m  [2m 98 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login[39m[2m (150ms)[22m
  [31mâœ˜[39m  [2m100 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries[39m[2m (94ms)[22m
  [31mâœ˜[39m  [2m101 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible)[39m[2m (104ms)[22m
  [31mâœ˜[39m  [2m102 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped[39m[2m (109ms)[22m
âœ“ First spike succeeded (5 requests)
âœ“ All 10 concurrent requests succeeded
  [32mâœ“[39m  [2m103 [22m[firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:7:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Connection Pooling â€º Should handle concurrent requests efficiently[2m (145ms)[22m
  [31mâœ˜[39m  [2m107 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models[39m[2m (11ms)[22m
  [31mâœ˜[39m  [2m105 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests[39m[2m (97ms)[22m
  [31mâœ˜[39m  [2m106 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency[39m[2m (96ms)[22m
  [31mâœ˜[39m  [2m109 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy[39m[2m (37ms)[22m
âœ“ Pool recovered - second spike succeeded (5 requests)
  [32mâœ“[39m  [2m104 [22m[firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:39:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Connection Pooling â€º Connection pool should recover after spike[2m (315ms)[22m
  [31mâœ˜[39m  [2m108 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly[39m[2m (110ms)[22m
  [31mâœ˜[39m  [2m110 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully[39m[2m (69ms)[22m
  [31mâœ˜[39m  [2m111 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available[39m[2m (36ms)[22m
âœ“ Available models: [object Object], [object Object], [object Object], [object Object]
  [32mâœ“[39m  [2m112 [22m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:7:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should list available LLM models[2m (51ms)[22m
  [31mâœ˜[39m  [2m113 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms[39m[2m (9ms)[22m
âœ“ Model selector API operational
  [32mâœ“[39m  [2m115 [22m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:42:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Model selector should be accessible via API[2m (36ms)[22m
  [31mâœ˜[39m  [2m116 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms[39m[2m (17ms)[22m
  [31mâœ˜[39m  [2m114 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model[39m[2m (126ms)[22m
  [31mâœ˜[39m  [2m117 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model[39m[2m (110ms)[22m
  [31mâœ˜[39m  [2m119 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available[39m[2m (34ms)[22m
âœ“ Model selector backend API available for frontend integration
  [32mâœ“[39m  [2m120 [22m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:223:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Model selector should be available on frontend[2m (49ms)[22m
  [31mâœ˜[39m  [2m118 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model[39m[2m (120ms)[22m
  [31mâœ˜[39m  [2m121 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational[39m[2m (12ms)[22m
  [31mâœ˜[39m  [2m122 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session[39m[2m (105ms)[22m
âœ“ Gateway latency: 26.45ms
  [32mâœ“[39m  [2m123 [22m[firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:19:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º API Gateway should respond in under 100ms[2m (33ms)[22m
  [31mâœ˜[39m  [2m124 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window[39m[2m (86ms)[22m
  [31mâœ˜[39m  [2m125 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms[39m[2m (32ms)[22m
  [31mâœ˜[39m  [2m126 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms[39m[2m (39ms)[22m
  [31mâœ˜[39m  [2m127 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms[39m[2m (31ms)[22m
âœ“ Avg latency: 6.35ms, Max: 24.33ms
  [32mâœ“[39m  [2m128 [22m[firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:81:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º Should maintain consistent response times under load[2m (41ms)[22m
Funding Service Latency:
  Average: 3.49ms
  Min: 1.02ms
  Max: 13.58ms
  [32mâœ“[39m  [2m129 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:55:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure funding service latency[2m (38ms)[22m
Policy Service Latency:
  Average: 4.31ms
  Min: 0.71ms
  Max: 18.68ms
  [32mâœ“[39m  [2m131 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:79:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure policy service latency[2m (45ms)[22m
LLM Service Latency:
  Average: 3.74ms
  Min: 0.89ms
  Max: 15.32ms
  [32mâœ“[39m  [2m133 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:103:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure LLM service latency[2m (41ms)[22m
  [31mâœ˜[39m  [2m130 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user[39m[2m (123ms)[22m
Analytics Service Latency:
  Average: 3.79ms
  Min: 0.99ms
  Max: 11.34ms
  [32mâœ“[39m  [2m134 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:127:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure analytics service latency[2m (40ms)[22m
âœ“ Per-IP rate limiting configured (no block within 10 requests)
Database Query Performance:
  Average: 3.43ms
  [32mâœ“[39m  [2m135 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:189:9 â€º Performance Tests â€º Database Query Performance â€º Should execute queries within acceptable time[2m (19ms)[22m
  [32mâœ“[39m  [2m132 [22m[firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:53:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-IP Rate Limiting â€º Should limit requests from same IP[2m (143ms)[22m
Health Check Response Times:
  Auth: 0.79ms
  Gateway: 2.90ms
  Funding: 6.57ms
  Policy: 1.77ms
  LLM: 1.53ms
  Analytics: 2.21ms
âœ“ Available models (4): liberty-mistral-v1.0, mistral, llama2, neural-chat
  [32mâœ“[39m  [2m136 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:216:9 â€º Performance Tests â€º API Response Times â€º Health check responses should be fast[2m (24ms)[22m
  [32mâœ“[39m  [2m137 [22m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:32:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should retrieve list of 4 available models[2m (11ms)[22m
âœ“ All models have required properties (id, name)
âœ“ All expected models present: llama2, mistral, neural-chat
  [32mâœ“[39m  [2m139 [22m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:56:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should have expected model properties[2m (12ms)[22m
  [32mâœ“[39m  [2m138 [22m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:89:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should include expected models: llama2, mistral, neural-chat[2m (22ms)[22m
  [31mâœ˜[39m  [2m140 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model[39m[2m (55ms)[22m
  [31mâœ˜[39m  [2m142 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits[39m[2m (123ms)[22m
  [31mâœ˜[39m  [2m143 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers[39m[2m (108ms)[22m
Auth Service Latency:
  Average: 3.28ms
  Min: 0.86ms
  Max: 19.58ms
  [32mâœ“[39m  [2m145 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:7:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure auth service latency[2m (41ms)[22m
  [31mâœ˜[39m  [2m144 [22m[31m[firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service[39m[2m (117ms)[22m
Gateway Latency:
  Average: 5.97ms
  Min: 2.74ms
  Max: 29.53ms
  [32mâœ“[39m  [2m146 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:31:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure gateway latency[2m (69ms)[22m
  [31mâœ˜[39m  [2m147 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model[39m[2m (114ms)[22m
âœ“ Invalid model correctly rejected with status: 500
  [32mâœ“[39m  [2m148 [22m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:384:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should return error for invalid model[2m (93ms)[22m
Concurrent Request Performance (10 requests):
  Total time: 32.78ms
  Average latency: 20.48ms
  Max latency: 29.58ms
  Throughput: 305.04 req/s
  [32mâœ“[39m  [2m149 [22m[firefox] â€º apps\api-e2e\src\performance\service-latency.spec.ts:153:9 â€º Performance Tests â€º Throughput Benchmarks â€º Should handle concurrent requests efficiently[2m (38ms)[22m
  [31mâœ˜[39m  [2m151 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query[39m[2m (108ms)[22m
  [31mâœ˜[39m  [2m154 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests[39m[2m (162ms)[22m
âœ“ Empty prompt correctly rejected
  [32mâœ“[39m  [2m156 [22m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:405:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should handle empty prompt gracefully[2m (43ms)[22m
âœ“ User registered: testuser_1770316357252_1@test.patriotchat.com
âœ“ Correctly rejected invalid password
âœ“ User recovered and logged in successfully
  [32mâœ“[39m  [2m157 [22m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:7:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should recover from invalid login attempts[2m (210ms)[22m
âœ“ Step 1: Loaded 4 models
âœ“ Step 2: Selected model - liberty-mistral-v1.0
âœ“ First registration succeeded
âœ“ Duplicate registration correctly rejected
  [32mâœ“[39m  [2m159 [22m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:56:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle duplicate registration attempts[2m (132ms)[22m
âœ“ Invalid token correctly rejected
âœ“ Public endpoint accessible without token
  [32mâœ“[39m  [2m160 [22m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:90:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle invalid token validation[2m (8ms)[22m
âœ“ Request without required field rejected
âœ“ Request with incomplete data rejected
  [32mâœ“[39m  [2m161 [22m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:113:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle malformed request bodies[2m (8ms)[22m
  [31mâœ˜[39m  [2m 73 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 79 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 80 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m 85 [22m[31m[chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session[39m[2m (30.0s)[22m
âœ“ User created in auth service
  [31mâœ˜[39m  [2m166 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics[39m[2m (100ms)[22m
âœ“ Registration succeeded (independent of analytics service)
âœ“ Login succeeded (independent of analytics service)
  [32mâœ“[39m  [2m168 [22m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:391:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should continue functioning when non-critical service is slow[2m (194ms)[22m
âœ“ User registered (auth service operational)
  [31mâœ˜[39m  [2m141 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m150 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m152 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m153 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m171 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration[39m[2m (102ms)[22m
  [31mâœ˜[39m  [2m155 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response[39m[2m (30.0s)[22m
âœ“ Registration event should be captured: undefined
âœ“ Registration event telemetry accessible
  [32mâœ“[39m  [2m172 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:7:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture user registration events[2m (106ms)[22m
  [31mâœ˜[39m  [2m173 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields[39m[2m (77ms)[22m
  [31mâœ˜[39m  [2m158 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m162 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window[39m[2m (30.0s)[22m
âœ“ Login event should be captured
âœ“ Authentication event telemetry recorded
  [32mâœ“[39m  [2m174 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:36:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture authentication events[2m (171ms)[22m
âœ“ High-volume analytics events handled successfully
  [32mâœ“[39m  [2m175 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:297:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Performance â€º Should handle high-volume analytics events[2m (105ms)[22m
âœ“ Health endpoint operational
  [32mâœ“[39m  [2m176 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:344:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should maintain health status endpoint[2m (7ms)[22m
  [31mâœ˜[39m  [2m177 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available[39m[2m (8ms)[22m
  [31mâœ˜[39m  [2m163 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries[39m[2m (30.0s)[22m
âœ“ Multiple analytics events accepted
âœ“ Analytics batch processing verified
  [32mâœ“[39m  [2m178 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:125:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should batch analytics events efficiently[2m (133ms)[22m
âœ“ Step 1: User registered
âœ“ Step 2: User logged in
âœ“ Invalid telemetry event handled gracefully (status: 202)
  [32mâœ“[39m  [2m181 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:201:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should handle invalid telemetry gracefully[2m (46ms)[22m
  [31mâœ˜[39m  [2m183 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow[39m[2m (70ms)[22m
âœ“ Registration completed in 91ms (telemetry non-blocking)
  [32mâœ“[39m  [2m184 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:271:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Performance â€º Should not block main request for telemetry[2m (96ms)[22m
âœ“ User authenticated
  [31mâœ˜[39m  [2m185 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow[39m[2m (70ms)[22m
âœ“ Consistent health metrics across checks
  [32mâœ“[39m  [2m186 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:370:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should provide consistent health metrics[2m (42ms)[22m
âœ“ Auth service: User registered
  [31mâœ˜[39m  [2m187 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services[39m[2m (90ms)[22m
âœ“ Telemetry service connection maintained during registration
âœ“ Telemetry service operational
  [32mâœ“[39m  [2m188 [22m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:391:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should handle telemetry service connection[2m (87ms)[22m
âœ“ Invalid credentials rejected (status: 401)
  [32mâœ“[39m  [2m189 [22m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:298:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid credentials gracefully[2m (131ms)[22m
âœ“ Service handled response appropriately (status: 404)
  [32mâœ“[39m  [2m190 [22m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:333:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should recover from service failures[2m (74ms)[22m
  [31mâœ˜[39m  [2m191 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly[39m[2m (75ms)[22m
âœ“ User registered
âœ“ User logged in successfully
  [31mâœ˜[39m  [2m192 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow[39m[2m (162ms)[22m
  [31mâœ˜[39m  [2m193 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session[39m[2m (109ms)[22m
  [31mâœ˜[39m  [2m194 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services[39m[2m (91ms)[22m
  [31mâœ˜[39m  [2m195 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration[39m[2m (99ms)[22m
âœ“ Login logged for user: testuser_1770316391611_1@test.patriotchat.com
  [31mâœ˜[39m  [2m196 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login[39m[2m (185ms)[22m
  [31mâœ˜[39m  [2m197 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries[39m[2m (101ms)[22m
  [31mâœ˜[39m  [2m198 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible)[39m[2m (93ms)[22m
  [31mâœ˜[39m  [2m199 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped[39m[2m (121ms)[22m
âœ“ All 10 concurrent requests succeeded
  [32mâœ“[39m  [2m200 [22m[webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:7:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Connection Pooling â€º Should handle concurrent requests efficiently[2m (148ms)[22m
âœ“ First spike succeeded (5 requests)
  [31mâœ˜[39m  [2m202 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly[39m[2m (63ms)[22m
âœ“ Pool recovered - second spike succeeded (5 requests)
  [32mâœ“[39m  [2m201 [22m[webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:39:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Connection Pooling â€º Connection pool should recover after spike[2m (275ms)[22m
  [31mâœ˜[39m  [2m203 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available[39m[2m (9ms)[22m
  [31mâœ˜[39m  [2m204 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests[39m[2m (104ms)[22m
  [31mâœ˜[39m  [2m205 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency[39m[2m (105ms)[22m
  [31mâœ˜[39m  [2m206 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy[39m[2m (37ms)[22m
âœ“ Available models: [object Object], [object Object], [object Object], [object Object]
  [32mâœ“[39m  [2m207 [22m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:7:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should list available LLM models[2m (39ms)[22m
  [31mâœ˜[39m  [2m208 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model[39m[2m (78ms)[22m
  [31mâœ˜[39m  [2m209 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models[39m[2m (32ms)[22m
âœ“ Model selector API operational
  [32mâœ“[39m  [2m210 [22m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:42:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Model selector should be accessible via API[2m (33ms)[22m
  [31mâœ˜[39m  [2m211 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available[39m[2m (7ms)[22m
  [31mâœ˜[39m  [2m212 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model[39m[2m (124ms)[22m
  [31mâœ˜[39m  [2m213 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model[39m[2m (114ms)[22m
  [31mâœ˜[39m  [2m214 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully[39m[2m (101ms)[22m
âœ“ Model selector backend API available for frontend integration
  [32mâœ“[39m  [2m215 [22m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:223:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Model selector should be available on frontend[2m (34ms)[22m
  [31mâœ˜[39m  [2m216 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms[39m[2m (25ms)[22m
  [31mâœ˜[39m  [2m217 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session[39m[2m (107ms)[22m
  [31mâœ˜[39m  [2m218 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms[39m[2m (28ms)[22m
âœ“ Gateway latency: 28.77ms
  [32mâœ“[39m  [2m219 [22m[webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:19:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º API Gateway should respond in under 100ms[2m (37ms)[22m
âœ“ Avg latency: 2.60ms, Max: 6.29ms
  [32mâœ“[39m  [2m220 [22m[webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:81:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º Should maintain consistent response times under load[2m (17ms)[22m
  [31mâœ˜[39m  [2m221 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational[39m[2m (7ms)[22m
  [31mâœ˜[39m  [2m222 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms[39m[2m (39ms)[22m
  [31mâœ˜[39m  [2m223 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms[39m[2m (36ms)[22m
  [31mâœ˜[39m  [2m224 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms[39m[2m (40ms)[22m
  [31mâœ˜[39m  [2m225 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user[39m[2m (117ms)[22m
âœ“ Per-IP rate limiting configured (no block within 10 requests)
  [32mâœ“[39m  [2m226 [22m[webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:53:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-IP Rate Limiting â€º Should limit requests from same IP[2m (151ms)[22m
  [31mâœ˜[39m  [2m227 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service[39m[2m (102ms)[22m
  [31mâœ˜[39m  [2m228 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window[39m[2m (115ms)[22m
  [31mâœ˜[39m  [2m229 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits[39m[2m (96ms)[22m
  [31mâœ˜[39m  [2m230 [22m[31m[webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers[39m[2m (111ms)[22m
Auth Service Latency:
  Average: 3.58ms
  Min: 0.71ms
  Max: 23.49ms
  [32mâœ“[39m  [2m231 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:7:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure auth service latency[2m (42ms)[22m
LLM Service Latency:
  Average: 2.91ms
  Min: 0.83ms
  Max: 11.19ms
  [32mâœ“[39m  [2m232 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:103:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure LLM service latency[2m (32ms)[22m
Analytics Service Latency:
  Average: 2.37ms
  Min: 0.67ms
  Max: 13.20ms
  [32mâœ“[39m  [2m233 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:127:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure analytics service latency[2m (27ms)[22m
Concurrent Request Performance (10 requests):
  Total time: 5.68ms
  Average latency: 3.61ms
  Max latency: 4.54ms
  Throughput: 1760.53 req/s
  [32mâœ“[39m  [2m234 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:153:9 â€º Performance Tests â€º Throughput Benchmarks â€º Should handle concurrent requests efficiently[2m (7ms)[22m
Database Query Performance:
  Average: 3.92ms
  [32mâœ“[39m  [2m235 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:189:9 â€º Performance Tests â€º Database Query Performance â€º Should execute queries within acceptable time[2m (22ms)[22m
Health Check Response Times:
  Auth: 0.79ms
  Gateway: 1.85ms
  Funding: 3.44ms
  Policy: 4.35ms
  LLM: 1.12ms
  Analytics: 1.06ms
  [32mâœ“[39m  [2m236 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:216:9 â€º Performance Tests â€º API Response Times â€º Health check responses should be fast[2m (20ms)[22m
âœ“ Available models (4): liberty-mistral-v1.0, mistral, llama2, neural-chat
  [32mâœ“[39m  [2m237 [22m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:32:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should retrieve list of 4 available models[2m (5ms)[22m
âœ“ All models have required properties (id, name)
  [32mâœ“[39m  [2m238 [22m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:56:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should have expected model properties[2m (17ms)[22m
âœ“ All expected models present: llama2, mistral, neural-chat
  [32mâœ“[39m  [2m239 [22m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:89:9 â€º Model Switching and Multi-Model Queries â€º Model Availability and Switching â€º Should include expected models: llama2, mistral, neural-chat[2m (8ms)[22m
  [31mâœ˜[39m  [2m240 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model[39m[2m (88ms)[22m
Gateway Latency:
  Average: 5.27ms
  Min: 1.88ms
  Max: 30.37ms
  [32mâœ“[39m  [2m241 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:31:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure gateway latency[2m (61ms)[22m
Funding Service Latency:
  Average: 5.64ms
  Min: 1.61ms
  Max: 31.20ms
  [32mâœ“[39m  [2m242 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:55:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure funding service latency[2m (66ms)[22m
Policy Service Latency:
  Average: 5.32ms
  Min: 0.99ms
  Max: 28.46ms
  [32mâœ“[39m  [2m245 [22m[webkit] â€º apps\api-e2e\src\performance\service-latency.spec.ts:79:9 â€º Performance Tests â€º Service Latency Benchmarks â€º Should measure policy service latency[2m (58ms)[22m
  [31mâœ˜[39m  [2m246 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests[39m[2m (124ms)[22m
  [31mâœ˜[39m  [2m248 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model[39m[2m (120ms)[22m
  [31mâœ˜[39m  [2m164 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m165 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately[39m[2m (30.0s)[22m
âœ“ Invalid model correctly rejected with status: 500
  [32mâœ“[39m  [2m250 [22m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:384:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should return error for invalid model[2m (117ms)[22m
  [31mâœ˜[39m  [2m167 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context[39m[2m (30.0s)[22m
âœ“ Empty prompt correctly rejected
  [32mâœ“[39m  [2m252 [22m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:405:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should handle empty prompt gracefully[2m (31ms)[22m
âœ“ Step 1: Loaded 4 models
âœ“ Step 2: Selected model - liberty-mistral-v1.0
  [31mâœ˜[39m  [2m169 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m254 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query[39m[2m (138ms)[22m
âœ“ User registered: testuser_1770316411372_1@test.patriotchat.com
âœ“ Correctly rejected invalid password
âœ“ User recovered and logged in successfully
  [32mâœ“[39m  [2m256 [22m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:7:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should recover from invalid login attempts[2m (217ms)[22m
âœ“ First registration succeeded
âœ“ Duplicate registration correctly rejected
  [32mâœ“[39m  [2m257 [22m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:56:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle duplicate registration attempts[2m (116ms)[22m
âœ“ Invalid token correctly rejected
âœ“ Public endpoint accessible without token
  [32mâœ“[39m  [2m258 [22m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:90:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle invalid token validation[2m (14ms)[22m
âœ“ Request without required field rejected
âœ“ Request with incomplete data rejected
  [32mâœ“[39m  [2m259 [22m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:113:9 â€º E2E Resilience & Error Recovery â€º Error Handling & Recovery â€º Should handle malformed request bodies[2m (6ms)[22m
  [31mâœ˜[39m  [2m170 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m179 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m180 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m182 [22m[31m[firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session[39m[2m (30.0s)[22m
âœ“ User created in auth service
  [31mâœ˜[39m  [2m263 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics[39m[2m (100ms)[22m
âœ“ Registration succeeded (independent of analytics service)
âœ“ Login succeeded (independent of analytics service)
  [32mâœ“[39m  [2m265 [22m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:391:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should continue functioning when non-critical service is slow[2m (147ms)[22m
âœ“ User registered (auth service operational)
  [31mâœ˜[39m  [2m243 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m244 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m247 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m268 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration[39m[2m (90ms)[22m
âœ“ Registration event should be captured: undefined
âœ“ Registration event telemetry accessible
  [32mâœ“[39m  [2m269 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:7:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture user registration events[2m (97ms)[22m
âœ“ Login event should be captured
âœ“ Authentication event telemetry recorded
  [32mâœ“[39m  [2m271 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:36:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture authentication events[2m (155ms)[22m
âœ“ Multiple analytics events accepted
âœ“ Analytics batch processing verified
  [32mâœ“[39m  [2m272 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:125:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should batch analytics events efficiently[2m (88ms)[22m
  [31mâœ˜[39m  [2m249 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m273 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields[39m[2m (76ms)[22m
âœ“ Invalid telemetry event handled gracefully (status: 202)
  [32mâœ“[39m  [2m274 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:201:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should handle invalid telemetry gracefully[2m (51ms)[22m
âœ“ Registration completed in 70ms (telemetry non-blocking)
  [32mâœ“[39m  [2m275 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:271:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Performance â€º Should not block main request for telemetry[2m (72ms)[22m
âœ“ High-volume analytics events handled successfully
  [32mâœ“[39m  [2m277 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:297:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Performance â€º Should handle high-volume analytics events[2m (104ms)[22m
âœ“ Health endpoint operational
  [32mâœ“[39m  [2m278 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:344:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should maintain health status endpoint[2m (10ms)[22m
  [31mâœ˜[39m  [2m279 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available[39m[2m (6ms)[22m
âœ“ Consistent health metrics across checks
  [32mâœ“[39m  [2m280 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:370:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should provide consistent health metrics[2m (42ms)[22m
âœ“ Telemetry service connection maintained during registration
âœ“ Telemetry service operational
  [32mâœ“[39m  [2m281 [22m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:391:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should handle telemetry service connection[2m (72ms)[22m
âœ“ Step 1: User registered
âœ“ Step 2: User logged in
  [31mâœ˜[39m  [2m251 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m253 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m283 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow[39m[2m (99ms)[22m
âœ“ User registered
âœ“ User logged in successfully
  [31mâœ˜[39m  [2m284 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow[39m[2m (161ms)[22m
âœ“ User authenticated
  [31mâœ˜[39m  [2m285 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow[39m[2m (104ms)[22m
  [31mâœ˜[39m  [2m255 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m286 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session[39m[2m (94ms)[22m
  [31mâœ˜[39m  [2m260 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window[39m[2m (30.0s)[22m
âœ“ Auth service: User registered
  [31mâœ˜[39m  [2m287 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services[39m[2m (117ms)[22m
  [31mâœ˜[39m  [2m288 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services[39m[2m (121ms)[22m
âœ“ Invalid credentials rejected (status: 401)
  [32mâœ“[39m  [2m289 [22m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:298:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid credentials gracefully[2m (156ms)[22m
âœ“ Service handled response appropriately (status: 404)
  [32mâœ“[39m  [2m290 [22m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:333:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should recover from service failures[2m (95ms)[22m
  [31mâœ˜[39m  [2m291 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly[39m[2m (103ms)[22m
  [31mâœ˜[39m  [2m261 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m262 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m264 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m266 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m267 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m270 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m276 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session[39m[2m (30.0s)[22m
  [31mâœ˜[39m  [2m282 [22m[31m[webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline[39m[2m (30.0s)[22m


[31m  1) [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 20 |[39m
     [90m 21 |[39m       expect(registerResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 22 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39muserId)[33m.[39mtoBeDefined()[33m;[39m
     [90m    |[39m                                             [31m[1m^[22m[39m
     [90m 23 |[39m       console[33m.[39mlog([32m`âœ“ Registration logged for user: ${testUser.email}`[39m)[33m;[39m
     [90m 24 |[39m
     [90m 25 |[39m       [90m// Verify audit log exists[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:22:45[22m

[31m  2) [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 75 |[39m       })[33m;[39m
     [90m 76 |[39m
    [31m[1m>[22m[39m[90m 77 |[39m       expect(auditResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 78 |[39m       [36mconst[39m logs [33m=[39m auditResponse[33m.[39mdata[33m?[39m[33m.[39mlogs [33m||[39m [][33m;[39m
     [90m 79 |[39m       expect(logs[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 80 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:77:32[22m

[31m  3) [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 115 |[39m       })[33m;[39m
     [90m 116 |[39m
    [31m[1m>[22m[39m[90m 117 |[39m       expect(inferenceResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 118 |[39m       console[33m.[39mlog([32m`âœ“ Inference query executed and tracked`[39m)[33m;[39m
     [90m 119 |[39m
     [90m 120 |[39m       [90m// Verify tracking in analytics[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:117:36[22m

[31m  4) [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible) [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m403[39m
    Received: [31m404[39m

    [0m [90m 159 |[39m
     [90m 160 |[39m       [90m// Should be forbidden[39m
    [31m[1m>[22m[39m[90m 161 |[39m       expect(modifyResponse[33m.[39mstatus)[33m.[39mtoBe([35m403[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 162 |[39m       console[33m.[39mlog(
     [90m 163 |[39m         [32m`âœ“ Audit logs are protected from modification (status: ${modifyResponse.status})`[39m[33m,[39m
     [90m 164 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:161:37[22m

[31m  5) [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 188 |[39m       })[33m;[39m
     [90m 189 |[39m
    [31m[1m>[22m[39m[90m 190 |[39m       expect(auditResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 191 |[39m       [36mconst[39m logs [33m=[39m auditResponse[33m.[39mdata[33m?[39m[33m.[39mlogs [33m||[39m [][33m;[39m
     [90m 192 |[39m
     [90m 193 |[39m       [90m// Verify all logs have timestamps[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:190:32[22m

[31m  6) [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 114 |[39m       })[33m;[39m
     [90m 115 |[39m
    [31m[1m>[22m[39m[90m 116 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 117 |[39m       expect(profileResponse[33m.[39mdata[33m?[39m[33m.[39memail)[33m.[39mtoBe(email)[33m;[39m
     [90m 118 |[39m       console[33m.[39mlog([32m`âœ“ User data persisted: ${email}`[39m)[33m;[39m
     [90m 119 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:116:34[22m

[31m  7) [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 147 |[39m       })[33m;[39m
     [90m 148 |[39m
    [31m[1m>[22m[39m[90m 149 |[39m       expect(updateResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 150 |[39m
     [90m 151 |[39m       [90m// Operation 3: Verify update[39m
     [90m 152 |[39m       [36mconst[39m profileResponse [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:149:33[22m

[31m  8) [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 192 |[39m       [36mconst[39m queryTime [33m=[39m performance[33m.[39mnow() [33m-[39m startTime[33m;[39m
     [90m 193 |[39m
    [31m[1m>[22m[39m[90m 194 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 195 |[39m       expect(queryTime)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m [90m// Should be under 500ms[39m
     [90m 196 |[39m       console[33m.[39mlog([32m`âœ“ Query executed in ${queryTime.toFixed(2)}ms`[39m)[33m;[39m
     [90m 197 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:194:34[22m

[31m  9) [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 207 |[39m
     [90m 208 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 209 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mdatabase)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 210 |[39m       console[33m.[39mlog([32m`âœ“ Database health: OK`[39m)[33m;[39m
     [90m 211 |[39m     })[33m;[39m
     [90m 212 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:209:39[22m

[31m  10) [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 218 |[39m       })[33m;[39m
     [90m 219 |[39m
    [31m[1m>[22m[39m[90m 220 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 221 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mpoolSize)[33m.[39mtoBeDefined()[33m;[39m
     [90m 222 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mactiveConnections)[33m.[39mtoBeDefined()[33m;[39m
     [90m 223 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:220:27[22m

[31m  11) [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m"llama2"[39m
    Received array: [31m[{"contextWindow": 8192, "description": "Values-first constitutional reasoning with enumerated powers citations", "id": "liberty-mistral-v1.0", "name": "Liberty Mistral v1.0", "provider": "local"}, {"contextWindow": 8192, "description": "General-styled Mistral instruct model", "id": "mistral", "name": "Mistral 7B Instruct (Ollama)", "provider": "ollama-maintained"}, {"contextWindow": 4096, "description": "Ollama-hosted Llama 2 baseline", "id": "llama2", "name": "Llama 2", "provider": "ollama"}, {"contextWindow": 4096, "description": "Legacy Neural Chat endpoint", "id": "neural-chat", "name": "Neural Chat", "provider": "ollama"}][39m

    [0m [90m 32 |[39m       [90m// Verify expected models are available[39m
     [90m 33 |[39m       [36mfor[39m ([36mconst[39m model [36mof[39m [33mTEST_DATA[39m[33m.[39m[33mAVAILABLE_MODELS[39m) {
    [31m[1m>[22m[39m[90m 34 |[39m         expect(models)[33m.[39mtoContain(model)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 35 |[39m       }
     [90m 36 |[39m
     [90m 37 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:34:24[22m

[31m  12) [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 85 |[39m       })[33m;[39m
     [90m 86 |[39m
    [31m[1m>[22m[39m[90m 87 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 88 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 89 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with llama2 model`[39m)[33m;[39m
     [90m 90 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:87:32[22m

[31m  13) [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 120 |[39m       })[33m;[39m
     [90m 121 |[39m
    [31m[1m>[22m[39m[90m 122 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 123 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 124 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with mistral model`[39m)[33m;[39m
     [90m 125 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:122:32[22m

[31m  14) [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 155 |[39m       })[33m;[39m
     [90m 156 |[39m
    [31m[1m>[22m[39m[90m 157 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 158 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 159 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with neural-chat model`[39m)[33m;[39m
     [90m 160 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:157:32[22m

[31m  15) [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

    [0m [90m 193 |[39m
     [90m 194 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       expect(queryResponse[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 196 |[39m       console[33m.[39mlog(
     [90m 197 |[39m         [32m`âœ“ Invalid model rejected with status ${queryResponse.status}`[39m[33m,[39m
     [90m 198 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:195:36[22m

[31m  16) [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 206 |[39m       })[33m;[39m
     [90m 207 |[39m
    [31m[1m>[22m[39m[90m 208 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 209 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mmodels)[33m.[39mtoBeDefined()[33m;[39m
     [90m 210 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mdata[33m?[39m[33m.[39mmodels))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 211 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:208:27[22m

[31m  17) [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 268 |[39m       })[33m;[39m
     [90m 269 |[39m
    [31m[1m>[22m[39m[90m 270 |[39m       expect(query1[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 271 |[39m
     [90m 272 |[39m       [90m// Query with model 2 (switch)[39m
     [90m 273 |[39m       [36mconst[39m query2 [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:270:25[22m

[31m  18) [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 12 |[39m       })[33m;[39m
     [90m 13 |[39m
    [31m[1m>[22m[39m[90m 14 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 15 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 16 |[39m       console[33m.[39mlog([32m`âœ“ Auth latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 17 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:14:27[22m

[31m  19) [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 36 |[39m       })[33m;[39m
     [90m 37 |[39m
    [31m[1m>[22m[39m[90m 38 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 39 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 40 |[39m       console[33m.[39mlog([32m`âœ“ Funding latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 41 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:38:27[22m

[31m  20) [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 48 |[39m       })[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 51 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 52 |[39m       console[33m.[39mlog([32m`âœ“ Policy latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 53 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:50:27[22m

[31m  21) [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 60 |[39m       })[33m;[39m
     [90m 61 |[39m
    [31m[1m>[22m[39m[90m 62 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 63 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 64 |[39m       console[33m.[39mlog([32m`âœ“ LLM latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 65 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:62:27[22m

[31m  22) [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 72 |[39m       })[33m;[39m
     [90m 73 |[39m
    [31m[1m>[22m[39m[90m 74 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 75 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 76 |[39m       console[33m.[39mlog([32m`âœ“ Analytics latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 77 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:74:27[22m

[31m  23) [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 119 |[39m         })[33m;[39m
     [90m 120 |[39m
    [31m[1m>[22m[39m[90m 121 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 122 |[39m       }
     [90m 123 |[39m
     [90m 124 |[39m       console[33m.[39mlog([32m`âœ“ All ${services.length} services operational`[39m)[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:121:29[22m

[31m  24) [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 35 |[39m       })[33m;[39m
     [90m 36 |[39m
    [31m[1m>[22m[39m[90m 37 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 38 |[39m       [90m// Check for rate limit headers[39m
     [90m 39 |[39m       [36mconst[39m rateLimitLimit [33m=[39m response[33m.[39mheaders[[32m'x-ratelimit-limit'[39m][33m;[39m
     [90m 40 |[39m       [36mconst[39m rateLimitRemaining [33m=[39m response[33m.[39mheaders[[32m'x-ratelimit-remaining'[39m][33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:37:27[22m

[31m  25) [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 133 |[39m       })[33m;[39m
     [90m 134 |[39m
    [31m[1m>[22m[39m[90m 135 |[39m       expect(inferenceResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 136 |[39m
     [90m 137 |[39m       [90m// Test profile endpoint (different limit)[39m
     [90m 138 |[39m       [36mconst[39m profileResponse [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:135:36[22m

[31m  26) [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 179 |[39m       })[33m;[39m
     [90m 180 |[39m
    [31m[1m>[22m[39m[90m 181 |[39m       expect(response1[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 182 |[39m
     [90m 183 |[39m       [90m// Wait and make another request in new window[39m
     [90m 184 |[39m       [36mawait[39m [36mnew[39m [33mPromise[39m((resolve) [33m=>[39m setTimeout(resolve[33m,[39m [35m1100[39m))[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:181:28[22m

[31m  27) [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 231 |[39m       })[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 234 |[39m
     [90m 235 |[39m       [90m// Check for standard rate limit headers[39m
     [90m 236 |[39m       [36mconst[39m hasRateLimitHeaders [33m=[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:233:27[22m

[31m  28) [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeGreaterThan[2m([22m[32mexpected[39m[2m)[22m

    Expected: > [32m0[39m
    Received:   [31m0[39m

    [0m [90m 287 |[39m       [90m// At least most should succeed (rate limit protection doesn't reject all)[39m
     [90m 288 |[39m       [36mconst[39m successCount [33m=[39m results[33m.[39mfilter((r) [33m=>[39m r[33m.[39mok)[33m.[39mlength[33m;[39m
    [31m[1m>[22m[39m[90m 289 |[39m       expect(successCount)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 290 |[39m
     [90m 291 |[39m       console[33m.[39mlog(
     [90m 292 |[39m         [32m`âœ“ Rate limiting protects service (${successCount}/5 requests succeeded)`[39m[33m,[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:289:28[22m

[31m  29) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 133 |[39m       })[33m;[39m
     [90m 134 |[39m
    [31m[1m>[22m[39m[90m 135 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 136 |[39m       expect(response[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 137 |[39m
     [90m 138 |[39m       [90m// Validate response structure[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:135:27[22m

[31m  30) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  31) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  32) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  33) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 297 |[39m         })[33m;[39m
     [90m 298 |[39m
    [31m[1m>[22m[39m[90m 299 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 300 |[39m         expect(response[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 301 |[39m
     [90m 302 |[39m         [90m// Verify the model used is the one we requested[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:299:29[22m

[31m  34) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 331 |[39m         })[33m;[39m
     [90m 332 |[39m
    [31m[1m>[22m[39m[90m 333 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 334 |[39m         [36mconst[39m responseData [33m=[39m response[33m.[39mdata [36mas[39m any[33m;[39m
     [90m 335 |[39m
     [90m 336 |[39m         [90m// Response should have timestamp in data or wrapper[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:333:29[22m

[31m  35) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  36) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  37) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 461 |[39m         })[33m;[39m
     [90m 462 |[39m
    [31m[1m>[22m[39m[90m 463 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 464 |[39m       }
     [90m 465 |[39m
     [90m 466 |[39m       [36mconst[39m totalTime [33m=[39m [33mDate[39m[33m.[39mnow() [33m-[39m startTime[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:463:29[22m

[31m  38) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  39) [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  40) [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  41) [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  42) [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  43) [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 309 |[39m       })[33m;[39m
     [90m 310 |[39m
    [31m[1m>[22m[39m[90m 311 |[39m       expect(authProfileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 312 |[39m       console[33m.[39mlog([32m`âœ“ User profile accessible in auth service`[39m)[33m;[39m
     [90m 313 |[39m
     [90m 314 |[39m       [90m// Execute an analytics event[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:311:38[22m

[31m  44) [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  45) [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  46) [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  47) [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 543 |[39m       })[33m;[39m
     [90m 544 |[39m
    [31m[1m>[22m[39m[90m 545 |[39m       expect(immediateResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 546 |[39m       console[33m.[39mlog([32m`âœ“ Valid token accepted`[39m)[33m;[39m
     [90m 547 |[39m
     [90m 548 |[39m       [90m// After expiration, token should be rejected[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:545:36[22m

[31m  48) [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  49) [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 194 |[39m
     [90m 195 |[39m       [90m// Response should contain user ID for tracking[39m
    [31m[1m>[22m[39m[90m 196 |[39m       expect(userId)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 197 |[39m       expect([36mtypeof[39m userId)[33m.[39mtoBe([32m'string'[39m)[33m;[39m
     [90m 198 |[39m       console[33m.[39mlog([32m`âœ“ Telemetry user ID present in response`[39m)[33m;[39m
     [90m 199 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\telemetry-validation.spec.ts:196:22[22m

[31m  50) [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  51) [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeLessThan[2m([22m[32mexpected[39m[2m)[22m

    Expected: < [32m500[39m
    Received:   [31m500[39m

    [0m [90m 362 |[39m
     [90m 363 |[39m       [90m// Should be ready or not ready, but endpoint should exist[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(readyResponse[33m.[39mstatus)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 365 |[39m       console[33m.[39mlog(
     [90m 366 |[39m         [32m`âœ“ Readiness check available (status: ${readyResponse.status})`[39m[33m,[39m
     [90m 367 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\telemetry-validation.spec.ts:364:36[22m

[31m  52) [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  53) [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 21 |[39m
     [90m 22 |[39m       expect(registerResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 23 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39muserId)[33m.[39mtoBeDefined()[33m;[39m
     [90m    |[39m                                             [31m[1m^[22m[39m
     [90m 24 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39mtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 25 |[39m       console[33m.[39mlog([32m`âœ“ User registered: ${testUser.email}`[39m)[33m;[39m
     [90m 26 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:23:45[22m

[31m  54) [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 84 |[39m       })[33m;[39m
     [90m 85 |[39m
    [31m[1m>[22m[39m[90m 86 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 87 |[39m       console[33m.[39mlog([32m`âœ“ Authenticated request successful`[39m)[33m;[39m
     [90m 88 |[39m     })[33m;[39m
     [90m 89 |[39m   })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:86:34[22m

[31m  55) [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 122 |[39m       })[33m;[39m
     [90m 123 |[39m
    [31m[1m>[22m[39m[90m 124 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 125 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 126 |[39m       console[33m.[39mlog([32m`âœ“ Inference executed with ${testQuery.model}`[39m)[33m;[39m
     [90m 127 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:124:32[22m

[31m  56) [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 174 |[39m         })[33m;[39m
     [90m 175 |[39m
    [31m[1m>[22m[39m[90m 176 |[39m         expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 177 |[39m         queryResults[33m.[39mpush(queryResponse[33m.[39mdata)[33m;[39m
     [90m 178 |[39m         console[33m.[39mlog([32m`âœ“ Query ${i + 1} executed with ${query.model}`[39m)[33m;[39m
     [90m 179 |[39m       }[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:176:34[22m

[31m  57) [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 226 |[39m       })[33m;[39m
     [90m 227 |[39m
    [31m[1m>[22m[39m[90m 228 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 229 |[39m       console[33m.[39mlog([32m`âœ“ LLM service: Query executed`[39m)[33m;[39m
     [90m 230 |[39m
     [90m 231 |[39m       [90m// Step 3: Analytics service - Track[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:228:32[22m

[31m  58) [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 267 |[39m       })[33m;[39m
     [90m 268 |[39m
    [31m[1m>[22m[39m[90m 269 |[39m       expect(authCheck[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 270 |[39m
     [90m 271 |[39m       [36mconst[39m query [33m=[39m [36mawait[39m apiRequest({
     [90m 272 |[39m         method[33m:[39m [32m'POST'[39m[33m,[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:269:28[22m

[31m  59) [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

    [0m [90m 398 |[39m
     [90m 399 |[39m       expect(invalidQuery[33m.[39mok)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 400 |[39m       expect(invalidQuery[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 401 |[39m       console[33m.[39mlog(
     [90m 402 |[39m         [32m`âœ“ Invalid request rejected (status: ${invalidQuery.status})`[39m[33m,[39m
     [90m 403 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:400:35[22m

[31m  60) [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 20 |[39m
     [90m 21 |[39m       expect(registerResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 22 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39muserId)[33m.[39mtoBeDefined()[33m;[39m
     [90m    |[39m                                             [31m[1m^[22m[39m
     [90m 23 |[39m       console[33m.[39mlog([32m`âœ“ Registration logged for user: ${testUser.email}`[39m)[33m;[39m
     [90m 24 |[39m
     [90m 25 |[39m       [90m// Verify audit log exists[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:22:45[22m

[31m  61) [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 75 |[39m       })[33m;[39m
     [90m 76 |[39m
    [31m[1m>[22m[39m[90m 77 |[39m       expect(auditResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 78 |[39m       [36mconst[39m logs [33m=[39m auditResponse[33m.[39mdata[33m?[39m[33m.[39mlogs [33m||[39m [][33m;[39m
     [90m 79 |[39m       expect(logs[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 80 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:77:32[22m

[31m  62) [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 115 |[39m       })[33m;[39m
     [90m 116 |[39m
    [31m[1m>[22m[39m[90m 117 |[39m       expect(inferenceResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 118 |[39m       console[33m.[39mlog([32m`âœ“ Inference query executed and tracked`[39m)[33m;[39m
     [90m 119 |[39m
     [90m 120 |[39m       [90m// Verify tracking in analytics[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:117:36[22m

[31m  63) [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible) [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m403[39m
    Received: [31m404[39m

    [0m [90m 159 |[39m
     [90m 160 |[39m       [90m// Should be forbidden[39m
    [31m[1m>[22m[39m[90m 161 |[39m       expect(modifyResponse[33m.[39mstatus)[33m.[39mtoBe([35m403[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 162 |[39m       console[33m.[39mlog(
     [90m 163 |[39m         [32m`âœ“ Audit logs are protected from modification (status: ${modifyResponse.status})`[39m[33m,[39m
     [90m 164 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:161:37[22m

[31m  64) [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 188 |[39m       })[33m;[39m
     [90m 189 |[39m
    [31m[1m>[22m[39m[90m 190 |[39m       expect(auditResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 191 |[39m       [36mconst[39m logs [33m=[39m auditResponse[33m.[39mdata[33m?[39m[33m.[39mlogs [33m||[39m [][33m;[39m
     [90m 192 |[39m
     [90m 193 |[39m       [90m// Verify all logs have timestamps[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:190:32[22m

[31m  65) [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 114 |[39m       })[33m;[39m
     [90m 115 |[39m
    [31m[1m>[22m[39m[90m 116 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 117 |[39m       expect(profileResponse[33m.[39mdata[33m?[39m[33m.[39memail)[33m.[39mtoBe(email)[33m;[39m
     [90m 118 |[39m       console[33m.[39mlog([32m`âœ“ User data persisted: ${email}`[39m)[33m;[39m
     [90m 119 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:116:34[22m

[31m  66) [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 147 |[39m       })[33m;[39m
     [90m 148 |[39m
    [31m[1m>[22m[39m[90m 149 |[39m       expect(updateResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 150 |[39m
     [90m 151 |[39m       [90m// Operation 3: Verify update[39m
     [90m 152 |[39m       [36mconst[39m profileResponse [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:149:33[22m

[31m  67) [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 192 |[39m       [36mconst[39m queryTime [33m=[39m performance[33m.[39mnow() [33m-[39m startTime[33m;[39m
     [90m 193 |[39m
    [31m[1m>[22m[39m[90m 194 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 195 |[39m       expect(queryTime)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m [90m// Should be under 500ms[39m
     [90m 196 |[39m       console[33m.[39mlog([32m`âœ“ Query executed in ${queryTime.toFixed(2)}ms`[39m)[33m;[39m
     [90m 197 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:194:34[22m

[31m  68) [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 207 |[39m
     [90m 208 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 209 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mdatabase)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 210 |[39m       console[33m.[39mlog([32m`âœ“ Database health: OK`[39m)[33m;[39m
     [90m 211 |[39m     })[33m;[39m
     [90m 212 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:209:39[22m

[31m  69) [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 218 |[39m       })[33m;[39m
     [90m 219 |[39m
    [31m[1m>[22m[39m[90m 220 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 221 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mpoolSize)[33m.[39mtoBeDefined()[33m;[39m
     [90m 222 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mactiveConnections)[33m.[39mtoBeDefined()[33m;[39m
     [90m 223 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:220:27[22m

[31m  70) [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m"llama2"[39m
    Received array: [31m[{"contextWindow": 8192, "description": "Values-first constitutional reasoning with enumerated powers citations", "id": "liberty-mistral-v1.0", "name": "Liberty Mistral v1.0", "provider": "local"}, {"contextWindow": 8192, "description": "General-styled Mistral instruct model", "id": "mistral", "name": "Mistral 7B Instruct (Ollama)", "provider": "ollama-maintained"}, {"contextWindow": 4096, "description": "Ollama-hosted Llama 2 baseline", "id": "llama2", "name": "Llama 2", "provider": "ollama"}, {"contextWindow": 4096, "description": "Legacy Neural Chat endpoint", "id": "neural-chat", "name": "Neural Chat", "provider": "ollama"}][39m

    [0m [90m 32 |[39m       [90m// Verify expected models are available[39m
     [90m 33 |[39m       [36mfor[39m ([36mconst[39m model [36mof[39m [33mTEST_DATA[39m[33m.[39m[33mAVAILABLE_MODELS[39m) {
    [31m[1m>[22m[39m[90m 34 |[39m         expect(models)[33m.[39mtoContain(model)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 35 |[39m       }
     [90m 36 |[39m
     [90m 37 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:34:24[22m

[31m  71) [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 85 |[39m       })[33m;[39m
     [90m 86 |[39m
    [31m[1m>[22m[39m[90m 87 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 88 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 89 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with llama2 model`[39m)[33m;[39m
     [90m 90 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:87:32[22m

[31m  72) [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 120 |[39m       })[33m;[39m
     [90m 121 |[39m
    [31m[1m>[22m[39m[90m 122 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 123 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 124 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with mistral model`[39m)[33m;[39m
     [90m 125 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:122:32[22m

[31m  73) [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 155 |[39m       })[33m;[39m
     [90m 156 |[39m
    [31m[1m>[22m[39m[90m 157 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 158 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 159 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with neural-chat model`[39m)[33m;[39m
     [90m 160 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:157:32[22m

[31m  74) [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

    [0m [90m 193 |[39m
     [90m 194 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       expect(queryResponse[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 196 |[39m       console[33m.[39mlog(
     [90m 197 |[39m         [32m`âœ“ Invalid model rejected with status ${queryResponse.status}`[39m[33m,[39m
     [90m 198 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:195:36[22m

[31m  75) [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 206 |[39m       })[33m;[39m
     [90m 207 |[39m
    [31m[1m>[22m[39m[90m 208 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 209 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mmodels)[33m.[39mtoBeDefined()[33m;[39m
     [90m 210 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mdata[33m?[39m[33m.[39mmodels))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 211 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:208:27[22m

[31m  76) [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 268 |[39m       })[33m;[39m
     [90m 269 |[39m
    [31m[1m>[22m[39m[90m 270 |[39m       expect(query1[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 271 |[39m
     [90m 272 |[39m       [90m// Query with model 2 (switch)[39m
     [90m 273 |[39m       [36mconst[39m query2 [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:270:25[22m

[31m  77) [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 12 |[39m       })[33m;[39m
     [90m 13 |[39m
    [31m[1m>[22m[39m[90m 14 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 15 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 16 |[39m       console[33m.[39mlog([32m`âœ“ Auth latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 17 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:14:27[22m

[31m  78) [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 36 |[39m       })[33m;[39m
     [90m 37 |[39m
    [31m[1m>[22m[39m[90m 38 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 39 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 40 |[39m       console[33m.[39mlog([32m`âœ“ Funding latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 41 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:38:27[22m

[31m  79) [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 48 |[39m       })[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 51 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 52 |[39m       console[33m.[39mlog([32m`âœ“ Policy latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 53 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:50:27[22m

[31m  80) [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 60 |[39m       })[33m;[39m
     [90m 61 |[39m
    [31m[1m>[22m[39m[90m 62 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 63 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 64 |[39m       console[33m.[39mlog([32m`âœ“ LLM latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 65 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:62:27[22m

[31m  81) [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 72 |[39m       })[33m;[39m
     [90m 73 |[39m
    [31m[1m>[22m[39m[90m 74 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 75 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 76 |[39m       console[33m.[39mlog([32m`âœ“ Analytics latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 77 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:74:27[22m

[31m  82) [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 119 |[39m         })[33m;[39m
     [90m 120 |[39m
    [31m[1m>[22m[39m[90m 121 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 122 |[39m       }
     [90m 123 |[39m
     [90m 124 |[39m       console[33m.[39mlog([32m`âœ“ All ${services.length} services operational`[39m)[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:121:29[22m

[31m  83) [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 35 |[39m       })[33m;[39m
     [90m 36 |[39m
    [31m[1m>[22m[39m[90m 37 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 38 |[39m       [90m// Check for rate limit headers[39m
     [90m 39 |[39m       [36mconst[39m rateLimitLimit [33m=[39m response[33m.[39mheaders[[32m'x-ratelimit-limit'[39m][33m;[39m
     [90m 40 |[39m       [36mconst[39m rateLimitRemaining [33m=[39m response[33m.[39mheaders[[32m'x-ratelimit-remaining'[39m][33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:37:27[22m

[31m  84) [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 133 |[39m       })[33m;[39m
     [90m 134 |[39m
    [31m[1m>[22m[39m[90m 135 |[39m       expect(inferenceResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 136 |[39m
     [90m 137 |[39m       [90m// Test profile endpoint (different limit)[39m
     [90m 138 |[39m       [36mconst[39m profileResponse [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:135:36[22m

[31m  85) [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 179 |[39m       })[33m;[39m
     [90m 180 |[39m
    [31m[1m>[22m[39m[90m 181 |[39m       expect(response1[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 182 |[39m
     [90m 183 |[39m       [90m// Wait and make another request in new window[39m
     [90m 184 |[39m       [36mawait[39m [36mnew[39m [33mPromise[39m((resolve) [33m=>[39m setTimeout(resolve[33m,[39m [35m1100[39m))[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:181:28[22m

[31m  86) [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 231 |[39m       })[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 234 |[39m
     [90m 235 |[39m       [90m// Check for standard rate limit headers[39m
     [90m 236 |[39m       [36mconst[39m hasRateLimitHeaders [33m=[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:233:27[22m

[31m  87) [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeGreaterThan[2m([22m[32mexpected[39m[2m)[22m

    Expected: > [32m0[39m
    Received:   [31m0[39m

    [0m [90m 287 |[39m       [90m// At least most should succeed (rate limit protection doesn't reject all)[39m
     [90m 288 |[39m       [36mconst[39m successCount [33m=[39m results[33m.[39mfilter((r) [33m=>[39m r[33m.[39mok)[33m.[39mlength[33m;[39m
    [31m[1m>[22m[39m[90m 289 |[39m       expect(successCount)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 290 |[39m
     [90m 291 |[39m       console[33m.[39mlog(
     [90m 292 |[39m         [32m`âœ“ Rate limiting protects service (${successCount}/5 requests succeeded)`[39m[33m,[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:289:28[22m

[31m  88) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 133 |[39m       })[33m;[39m
     [90m 134 |[39m
    [31m[1m>[22m[39m[90m 135 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 136 |[39m       expect(response[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 137 |[39m
     [90m 138 |[39m       [90m// Validate response structure[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:135:27[22m

[31m  89) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  90) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  91) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  92) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 297 |[39m         })[33m;[39m
     [90m 298 |[39m
    [31m[1m>[22m[39m[90m 299 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 300 |[39m         expect(response[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 301 |[39m
     [90m 302 |[39m         [90m// Verify the model used is the one we requested[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:299:29[22m

[31m  93) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 331 |[39m         })[33m;[39m
     [90m 332 |[39m
    [31m[1m>[22m[39m[90m 333 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 334 |[39m         [36mconst[39m responseData [33m=[39m response[33m.[39mdata [36mas[39m any[33m;[39m
     [90m 335 |[39m
     [90m 336 |[39m         [90m// Response should have timestamp in data or wrapper[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:333:29[22m

[31m  94) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  95) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  96) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 461 |[39m         })[33m;[39m
     [90m 462 |[39m
    [31m[1m>[22m[39m[90m 463 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 464 |[39m       }
     [90m 465 |[39m
     [90m 466 |[39m       [36mconst[39m totalTime [33m=[39m [33mDate[39m[33m.[39mnow() [33m-[39m startTime[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:463:29[22m

[31m  97) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  98) [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  99) [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  100) [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  101) [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  102) [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 309 |[39m       })[33m;[39m
     [90m 310 |[39m
    [31m[1m>[22m[39m[90m 311 |[39m       expect(authProfileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 312 |[39m       console[33m.[39mlog([32m`âœ“ User profile accessible in auth service`[39m)[33m;[39m
     [90m 313 |[39m
     [90m 314 |[39m       [90m// Execute an analytics event[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:311:38[22m

[31m  103) [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  104) [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  105) [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  106) [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 543 |[39m       })[33m;[39m
     [90m 544 |[39m
    [31m[1m>[22m[39m[90m 545 |[39m       expect(immediateResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 546 |[39m       console[33m.[39mlog([32m`âœ“ Valid token accepted`[39m)[33m;[39m
     [90m 547 |[39m
     [90m 548 |[39m       [90m// After expiration, token should be rejected[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:545:36[22m

[31m  107) [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  108) [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 194 |[39m
     [90m 195 |[39m       [90m// Response should contain user ID for tracking[39m
    [31m[1m>[22m[39m[90m 196 |[39m       expect(userId)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 197 |[39m       expect([36mtypeof[39m userId)[33m.[39mtoBe([32m'string'[39m)[33m;[39m
     [90m 198 |[39m       console[33m.[39mlog([32m`âœ“ Telemetry user ID present in response`[39m)[33m;[39m
     [90m 199 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\telemetry-validation.spec.ts:196:22[22m

[31m  109) [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  110) [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeLessThan[2m([22m[32mexpected[39m[2m)[22m

    Expected: < [32m500[39m
    Received:   [31m500[39m

    [0m [90m 362 |[39m
     [90m 363 |[39m       [90m// Should be ready or not ready, but endpoint should exist[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(readyResponse[33m.[39mstatus)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 365 |[39m       console[33m.[39mlog(
     [90m 366 |[39m         [32m`âœ“ Readiness check available (status: ${readyResponse.status})`[39m[33m,[39m
     [90m 367 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\telemetry-validation.spec.ts:364:36[22m

[31m  111) [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  112) [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 21 |[39m
     [90m 22 |[39m       expect(registerResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 23 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39muserId)[33m.[39mtoBeDefined()[33m;[39m
     [90m    |[39m                                             [31m[1m^[22m[39m
     [90m 24 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39mtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 25 |[39m       console[33m.[39mlog([32m`âœ“ User registered: ${testUser.email}`[39m)[33m;[39m
     [90m 26 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:23:45[22m

[31m  113) [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 84 |[39m       })[33m;[39m
     [90m 85 |[39m
    [31m[1m>[22m[39m[90m 86 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 87 |[39m       console[33m.[39mlog([32m`âœ“ Authenticated request successful`[39m)[33m;[39m
     [90m 88 |[39m     })[33m;[39m
     [90m 89 |[39m   })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:86:34[22m

[31m  114) [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 122 |[39m       })[33m;[39m
     [90m 123 |[39m
    [31m[1m>[22m[39m[90m 124 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 125 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 126 |[39m       console[33m.[39mlog([32m`âœ“ Inference executed with ${testQuery.model}`[39m)[33m;[39m
     [90m 127 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:124:32[22m

[31m  115) [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 174 |[39m         })[33m;[39m
     [90m 175 |[39m
    [31m[1m>[22m[39m[90m 176 |[39m         expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 177 |[39m         queryResults[33m.[39mpush(queryResponse[33m.[39mdata)[33m;[39m
     [90m 178 |[39m         console[33m.[39mlog([32m`âœ“ Query ${i + 1} executed with ${query.model}`[39m)[33m;[39m
     [90m 179 |[39m       }[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:176:34[22m

[31m  116) [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 226 |[39m       })[33m;[39m
     [90m 227 |[39m
    [31m[1m>[22m[39m[90m 228 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 229 |[39m       console[33m.[39mlog([32m`âœ“ LLM service: Query executed`[39m)[33m;[39m
     [90m 230 |[39m
     [90m 231 |[39m       [90m// Step 3: Analytics service - Track[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:228:32[22m

[31m  117) [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 267 |[39m       })[33m;[39m
     [90m 268 |[39m
    [31m[1m>[22m[39m[90m 269 |[39m       expect(authCheck[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 270 |[39m
     [90m 271 |[39m       [36mconst[39m query [33m=[39m [36mawait[39m apiRequest({
     [90m 272 |[39m         method[33m:[39m [32m'POST'[39m[33m,[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:269:28[22m

[31m  118) [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

    [0m [90m 398 |[39m
     [90m 399 |[39m       expect(invalidQuery[33m.[39mok)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 400 |[39m       expect(invalidQuery[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 401 |[39m       console[33m.[39mlog(
     [90m 402 |[39m         [32m`âœ“ Invalid request rejected (status: ${invalidQuery.status})`[39m[33m,[39m
     [90m 403 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:400:35[22m

[31m  119) [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 20 |[39m
     [90m 21 |[39m       expect(registerResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 22 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39muserId)[33m.[39mtoBeDefined()[33m;[39m
     [90m    |[39m                                             [31m[1m^[22m[39m
     [90m 23 |[39m       console[33m.[39mlog([32m`âœ“ Registration logged for user: ${testUser.email}`[39m)[33m;[39m
     [90m 24 |[39m
     [90m 25 |[39m       [90m// Verify audit log exists[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:22:45[22m

[31m  120) [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 75 |[39m       })[33m;[39m
     [90m 76 |[39m
    [31m[1m>[22m[39m[90m 77 |[39m       expect(auditResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 78 |[39m       [36mconst[39m logs [33m=[39m auditResponse[33m.[39mdata[33m?[39m[33m.[39mlogs [33m||[39m [][33m;[39m
     [90m 79 |[39m       expect(logs[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 80 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:77:32[22m

[31m  121) [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 115 |[39m       })[33m;[39m
     [90m 116 |[39m
    [31m[1m>[22m[39m[90m 117 |[39m       expect(inferenceResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 118 |[39m       console[33m.[39mlog([32m`âœ“ Inference query executed and tracked`[39m)[33m;[39m
     [90m 119 |[39m
     [90m 120 |[39m       [90m// Verify tracking in analytics[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:117:36[22m

[31m  122) [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible) [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m403[39m
    Received: [31m404[39m

    [0m [90m 159 |[39m
     [90m 160 |[39m       [90m// Should be forbidden[39m
    [31m[1m>[22m[39m[90m 161 |[39m       expect(modifyResponse[33m.[39mstatus)[33m.[39mtoBe([35m403[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 162 |[39m       console[33m.[39mlog(
     [90m 163 |[39m         [32m`âœ“ Audit logs are protected from modification (status: ${modifyResponse.status})`[39m[33m,[39m
     [90m 164 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:161:37[22m

[31m  123) [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 188 |[39m       })[33m;[39m
     [90m 189 |[39m
    [31m[1m>[22m[39m[90m 190 |[39m       expect(auditResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 191 |[39m       [36mconst[39m logs [33m=[39m auditResponse[33m.[39mdata[33m?[39m[33m.[39mlogs [33m||[39m [][33m;[39m
     [90m 192 |[39m
     [90m 193 |[39m       [90m// Verify all logs have timestamps[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:190:32[22m

[31m  124) [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 114 |[39m       })[33m;[39m
     [90m 115 |[39m
    [31m[1m>[22m[39m[90m 116 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 117 |[39m       expect(profileResponse[33m.[39mdata[33m?[39m[33m.[39memail)[33m.[39mtoBe(email)[33m;[39m
     [90m 118 |[39m       console[33m.[39mlog([32m`âœ“ User data persisted: ${email}`[39m)[33m;[39m
     [90m 119 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:116:34[22m

[31m  125) [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 147 |[39m       })[33m;[39m
     [90m 148 |[39m
    [31m[1m>[22m[39m[90m 149 |[39m       expect(updateResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 150 |[39m
     [90m 151 |[39m       [90m// Operation 3: Verify update[39m
     [90m 152 |[39m       [36mconst[39m profileResponse [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:149:33[22m

[31m  126) [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 192 |[39m       [36mconst[39m queryTime [33m=[39m performance[33m.[39mnow() [33m-[39m startTime[33m;[39m
     [90m 193 |[39m
    [31m[1m>[22m[39m[90m 194 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 195 |[39m       expect(queryTime)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m [90m// Should be under 500ms[39m
     [90m 196 |[39m       console[33m.[39mlog([32m`âœ“ Query executed in ${queryTime.toFixed(2)}ms`[39m)[33m;[39m
     [90m 197 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:194:34[22m

[31m  127) [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 207 |[39m
     [90m 208 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 209 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mdatabase)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 210 |[39m       console[33m.[39mlog([32m`âœ“ Database health: OK`[39m)[33m;[39m
     [90m 211 |[39m     })[33m;[39m
     [90m 212 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:209:39[22m

[31m  128) [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 218 |[39m       })[33m;[39m
     [90m 219 |[39m
    [31m[1m>[22m[39m[90m 220 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 221 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mpoolSize)[33m.[39mtoBeDefined()[33m;[39m
     [90m 222 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mactiveConnections)[33m.[39mtoBeDefined()[33m;[39m
     [90m 223 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\database.spec.ts:220:27[22m

[31m  129) [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m"llama2"[39m
    Received array: [31m[{"contextWindow": 8192, "description": "Values-first constitutional reasoning with enumerated powers citations", "id": "liberty-mistral-v1.0", "name": "Liberty Mistral v1.0", "provider": "local"}, {"contextWindow": 8192, "description": "General-styled Mistral instruct model", "id": "mistral", "name": "Mistral 7B Instruct (Ollama)", "provider": "ollama-maintained"}, {"contextWindow": 4096, "description": "Ollama-hosted Llama 2 baseline", "id": "llama2", "name": "Llama 2", "provider": "ollama"}, {"contextWindow": 4096, "description": "Legacy Neural Chat endpoint", "id": "neural-chat", "name": "Neural Chat", "provider": "ollama"}][39m

    [0m [90m 32 |[39m       [90m// Verify expected models are available[39m
     [90m 33 |[39m       [36mfor[39m ([36mconst[39m model [36mof[39m [33mTEST_DATA[39m[33m.[39m[33mAVAILABLE_MODELS[39m) {
    [31m[1m>[22m[39m[90m 34 |[39m         expect(models)[33m.[39mtoContain(model)[33m;[39m
     [90m    |[39m                        [31m[1m^[22m[39m
     [90m 35 |[39m       }
     [90m 36 |[39m
     [90m 37 |[39m       console[33m.[39mlog([0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:34:24[22m

[31m  130) [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 85 |[39m       })[33m;[39m
     [90m 86 |[39m
    [31m[1m>[22m[39m[90m 87 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 88 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 89 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with llama2 model`[39m)[33m;[39m
     [90m 90 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:87:32[22m

[31m  131) [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 120 |[39m       })[33m;[39m
     [90m 121 |[39m
    [31m[1m>[22m[39m[90m 122 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 123 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 124 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with mistral model`[39m)[33m;[39m
     [90m 125 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:122:32[22m

[31m  132) [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 155 |[39m       })[33m;[39m
     [90m 156 |[39m
    [31m[1m>[22m[39m[90m 157 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 158 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 159 |[39m       console[33m.[39mlog([32m`âœ“ Inference successful with neural-chat model`[39m)[33m;[39m
     [90m 160 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:157:32[22m

[31m  133) [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

    [0m [90m 193 |[39m
     [90m 194 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       expect(queryResponse[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 196 |[39m       console[33m.[39mlog(
     [90m 197 |[39m         [32m`âœ“ Invalid model rejected with status ${queryResponse.status}`[39m[33m,[39m
     [90m 198 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:195:36[22m

[31m  134) [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 206 |[39m       })[33m;[39m
     [90m 207 |[39m
    [31m[1m>[22m[39m[90m 208 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 209 |[39m       expect(response[33m.[39mdata[33m?[39m[33m.[39mmodels)[33m.[39mtoBeDefined()[33m;[39m
     [90m 210 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mdata[33m?[39m[33m.[39mmodels))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 211 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:208:27[22m

[31m  135) [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 268 |[39m       })[33m;[39m
     [90m 269 |[39m
    [31m[1m>[22m[39m[90m 270 |[39m       expect(query1[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 271 |[39m
     [90m 272 |[39m       [90m// Query with model 2 (switch)[39m
     [90m 273 |[39m       [36mconst[39m query2 [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:270:25[22m

[31m  136) [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 12 |[39m       })[33m;[39m
     [90m 13 |[39m
    [31m[1m>[22m[39m[90m 14 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 15 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 16 |[39m       console[33m.[39mlog([32m`âœ“ Auth latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 17 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:14:27[22m

[31m  137) [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 36 |[39m       })[33m;[39m
     [90m 37 |[39m
    [31m[1m>[22m[39m[90m 38 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 39 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 40 |[39m       console[33m.[39mlog([32m`âœ“ Funding latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 41 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:38:27[22m

[31m  138) [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 48 |[39m       })[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 51 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 52 |[39m       console[33m.[39mlog([32m`âœ“ Policy latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 53 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:50:27[22m

[31m  139) [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 60 |[39m       })[33m;[39m
     [90m 61 |[39m
    [31m[1m>[22m[39m[90m 62 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 63 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 64 |[39m       console[33m.[39mlog([32m`âœ“ LLM latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 65 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:62:27[22m

[31m  140) [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 72 |[39m       })[33m;[39m
     [90m 73 |[39m
    [31m[1m>[22m[39m[90m 74 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 75 |[39m       expect(latency)[33m.[39mtoBeLessThan([33mTEST_DATA[39m[33m.[39m[33mPERFORMANCE_THRESHOLD_MS[39m)[33m;[39m
     [90m 76 |[39m       console[33m.[39mlog([32m`âœ“ Analytics latency: ${latency.toFixed(2)}ms`[39m)[33m;[39m
     [90m 77 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:74:27[22m

[31m  141) [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 119 |[39m         })[33m;[39m
     [90m 120 |[39m
    [31m[1m>[22m[39m[90m 121 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 122 |[39m       }
     [90m 123 |[39m
     [90m 124 |[39m       console[33m.[39mlog([32m`âœ“ All ${services.length} services operational`[39m)[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\performance.spec.ts:121:29[22m

[31m  142) [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 35 |[39m       })[33m;[39m
     [90m 36 |[39m
    [31m[1m>[22m[39m[90m 37 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 38 |[39m       [90m// Check for rate limit headers[39m
     [90m 39 |[39m       [36mconst[39m rateLimitLimit [33m=[39m response[33m.[39mheaders[[32m'x-ratelimit-limit'[39m][33m;[39m
     [90m 40 |[39m       [36mconst[39m rateLimitRemaining [33m=[39m response[33m.[39mheaders[[32m'x-ratelimit-remaining'[39m][33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:37:27[22m

[31m  143) [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 133 |[39m       })[33m;[39m
     [90m 134 |[39m
    [31m[1m>[22m[39m[90m 135 |[39m       expect(inferenceResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 136 |[39m
     [90m 137 |[39m       [90m// Test profile endpoint (different limit)[39m
     [90m 138 |[39m       [36mconst[39m profileResponse [33m=[39m [36mawait[39m apiRequest({[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:135:36[22m

[31m  144) [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 179 |[39m       })[33m;[39m
     [90m 180 |[39m
    [31m[1m>[22m[39m[90m 181 |[39m       expect(response1[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 182 |[39m
     [90m 183 |[39m       [90m// Wait and make another request in new window[39m
     [90m 184 |[39m       [36mawait[39m [36mnew[39m [33mPromise[39m((resolve) [33m=>[39m setTimeout(resolve[33m,[39m [35m1100[39m))[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:181:28[22m

[31m  145) [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 231 |[39m       })[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 234 |[39m
     [90m 235 |[39m       [90m// Check for standard rate limit headers[39m
     [90m 236 |[39m       [36mconst[39m hasRateLimitHeaders [33m=[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:233:27[22m

[31m  146) [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeGreaterThan[2m([22m[32mexpected[39m[2m)[22m

    Expected: > [32m0[39m
    Received:   [31m0[39m

    [0m [90m 287 |[39m       [90m// At least most should succeed (rate limit protection doesn't reject all)[39m
     [90m 288 |[39m       [36mconst[39m successCount [33m=[39m results[33m.[39mfilter((r) [33m=>[39m r[33m.[39mok)[33m.[39mlength[33m;[39m
    [31m[1m>[22m[39m[90m 289 |[39m       expect(successCount)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 290 |[39m
     [90m 291 |[39m       console[33m.[39mlog(
     [90m 292 |[39m         [32m`âœ“ Rate limiting protects service (${successCount}/5 requests succeeded)`[39m[33m,[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:289:28[22m

[31m  147) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 133 |[39m       })[33m;[39m
     [90m 134 |[39m
    [31m[1m>[22m[39m[90m 135 |[39m       expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 136 |[39m       expect(response[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 137 |[39m
     [90m 138 |[39m       [90m// Validate response structure[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:135:27[22m

[31m  148) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  149) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  150) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  151) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 297 |[39m         })[33m;[39m
     [90m 298 |[39m
    [31m[1m>[22m[39m[90m 299 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 300 |[39m         expect(response[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 301 |[39m
     [90m 302 |[39m         [90m// Verify the model used is the one we requested[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:299:29[22m

[31m  152) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 331 |[39m         })[33m;[39m
     [90m 332 |[39m
    [31m[1m>[22m[39m[90m 333 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 334 |[39m         [36mconst[39m responseData [33m=[39m response[33m.[39mdata [36mas[39m any[33m;[39m
     [90m 335 |[39m
     [90m 336 |[39m         [90m// Response should have timestamp in data or wrapper[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:333:29[22m

[31m  153) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  154) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  155) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 461 |[39m         })[33m;[39m
     [90m 462 |[39m
    [31m[1m>[22m[39m[90m 463 |[39m         expect(response[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 464 |[39m       }
     [90m 465 |[39m
     [90m 466 |[39m       [36mconst[39m totalTime [33m=[39m [33mDate[39m[33m.[39mnow() [33m-[39m startTime[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\model-switching.spec.ts:463:29[22m

[31m  156) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  157) [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  158) [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  159) [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  160) [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  161) [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 309 |[39m       })[33m;[39m
     [90m 310 |[39m
    [31m[1m>[22m[39m[90m 311 |[39m       expect(authProfileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 312 |[39m       console[33m.[39mlog([32m`âœ“ User profile accessible in auth service`[39m)[33m;[39m
     [90m 313 |[39m
     [90m 314 |[39m       [90m// Execute an analytics event[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:311:38[22m

[31m  162) [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  163) [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  164) [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  165) [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 543 |[39m       })[33m;[39m
     [90m 544 |[39m
    [31m[1m>[22m[39m[90m 545 |[39m       expect(immediateResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 546 |[39m       console[33m.[39mlog([32m`âœ“ Valid token accepted`[39m)[33m;[39m
     [90m 547 |[39m
     [90m 548 |[39m       [90m// After expiration, token should be rejected[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:545:36[22m

[31m  166) [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  167) [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 194 |[39m
     [90m 195 |[39m       [90m// Response should contain user ID for tracking[39m
    [31m[1m>[22m[39m[90m 196 |[39m       expect(userId)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 197 |[39m       expect([36mtypeof[39m userId)[33m.[39mtoBe([32m'string'[39m)[33m;[39m
     [90m 198 |[39m       console[33m.[39mlog([32m`âœ“ Telemetry user ID present in response`[39m)[33m;[39m
     [90m 199 |[39m     })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\telemetry-validation.spec.ts:196:22[22m

[31m  168) [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  169) [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeLessThan[2m([22m[32mexpected[39m[2m)[22m

    Expected: < [32m500[39m
    Received:   [31m500[39m

    [0m [90m 362 |[39m
     [90m 363 |[39m       [90m// Should be ready or not ready, but endpoint should exist[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(readyResponse[33m.[39mstatus)[33m.[39mtoBeLessThan([35m500[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 365 |[39m       console[33m.[39mlog(
     [90m 366 |[39m         [32m`âœ“ Readiness check available (status: ${readyResponse.status})`[39m[33m,[39m
     [90m 367 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\telemetry-validation.spec.ts:364:36[22m

[31m  170) [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline [39m

    [31mTest timeout of 30000ms exceeded.[39m

[31m  171) [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeDefined[2m()[22m

    Received: [31mundefined[39m

    [0m [90m 21 |[39m
     [90m 22 |[39m       expect(registerResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 23 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39muserId)[33m.[39mtoBeDefined()[33m;[39m
     [90m    |[39m                                             [31m[1m^[22m[39m
     [90m 24 |[39m       expect(registerResponse[33m.[39mdata[33m?[39m[33m.[39mtoken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 25 |[39m       console[33m.[39mlog([32m`âœ“ User registered: ${testUser.email}`[39m)[33m;[39m
     [90m 26 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:23:45[22m

[31m  172) [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 84 |[39m       })[33m;[39m
     [90m 85 |[39m
    [31m[1m>[22m[39m[90m 86 |[39m       expect(profileResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 87 |[39m       console[33m.[39mlog([32m`âœ“ Authenticated request successful`[39m)[33m;[39m
     [90m 88 |[39m     })[33m;[39m
     [90m 89 |[39m   })[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:86:34[22m

[31m  173) [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 122 |[39m       })[33m;[39m
     [90m 123 |[39m
    [31m[1m>[22m[39m[90m 124 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 125 |[39m       expect(queryResponse[33m.[39mdata[33m?[39m[33m.[39mresponse)[33m.[39mtoBeDefined()[33m;[39m
     [90m 126 |[39m       console[33m.[39mlog([32m`âœ“ Inference executed with ${testQuery.model}`[39m)[33m;[39m
     [90m 127 |[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:124:32[22m

[31m  174) [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 174 |[39m         })[33m;[39m
     [90m 175 |[39m
    [31m[1m>[22m[39m[90m 176 |[39m         expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 177 |[39m         queryResults[33m.[39mpush(queryResponse[33m.[39mdata)[33m;[39m
     [90m 178 |[39m         console[33m.[39mlog([32m`âœ“ Query ${i + 1} executed with ${query.model}`[39m)[33m;[39m
     [90m 179 |[39m       }[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:176:34[22m

[31m  175) [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 226 |[39m       })[33m;[39m
     [90m 227 |[39m
    [31m[1m>[22m[39m[90m 228 |[39m       expect(queryResponse[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 229 |[39m       console[33m.[39mlog([32m`âœ“ LLM service: Query executed`[39m)[33m;[39m
     [90m 230 |[39m
     [90m 231 |[39m       [90m// Step 3: Analytics service - Track[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:228:32[22m

[31m  176) [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

    [0m [90m 267 |[39m       })[33m;[39m
     [90m 268 |[39m
    [31m[1m>[22m[39m[90m 269 |[39m       expect(authCheck[33m.[39mok)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 270 |[39m
     [90m 271 |[39m       [36mconst[39m query [33m=[39m [36mawait[39m apiRequest({
     [90m 272 |[39m         method[33m:[39m [32m'POST'[39m[33m,[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:269:28[22m

[31m  177) [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly [39m

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

    [0m [90m 398 |[39m
     [90m 399 |[39m       expect(invalidQuery[33m.[39mok)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 400 |[39m       expect(invalidQuery[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 401 |[39m       console[33m.[39mlog(
     [90m 402 |[39m         [32m`âœ“ Invalid request rejected (status: ${invalidQuery.status})`[39m[33m,[39m
     [90m 403 |[39m       )[33m;[39m[0m
    [2m    at C:\repos\patriotchat\apps\api-e2e\src\workflows\user-journey.spec.ts:400:35[22m

[31m  177 failed[39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible) [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers [39m
[31m    [chromium] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services [39m
[31m    [chromium] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible) [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers [39m
[31m    [firefox] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services [39m
[31m    [firefox] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:7:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user registration [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:39:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º User Action Logging â€º Should log user login [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:87:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Query Tracking â€º Should track LLM inference queries [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:133:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º Logs should be immutable (no modification possible) [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\audit-trail.spec.ts:167:9 â€º Critical Requirement: Audit Trail (Immutable PostgreSQL Logs) â€º Log Integrity â€º All audit operations should be timestamped [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:90:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Stored data should persist across requests [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:121:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Data Persistence â€º Multiple database operations should maintain consistency [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:165:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Query Performance â€º Database queries should execute quickly [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:201:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º PostgreSQL connection should be healthy [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\database.spec.ts:213:9 â€º Critical Requirement: Database (PostgreSQL with Connection Pooling) â€º Database Health â€º Connection pool status should be available [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:22:9 â€º Critical Requirement: LLM Model Selector â€º Model Availability â€º Should include required models [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:57:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with llama2 model [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:92:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with mistral model [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:127:9 â€º Critical Requirement: LLM Model Selector â€º Model Selection â€º Should execute inference with neural-chat model [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:164:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Should handle invalid model gracefully [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:201:9 â€º Critical Requirement: LLM Model Selector â€º Model Configuration â€º Model metadata should be available [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\llm-selector.spec.ts:240:9 â€º Critical Requirement: LLM Model Selector â€º Frontend Integration â€º Should support model switching during session [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:7:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Auth service should respond in under 100ms [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:31:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Funding service should respond in under 100ms [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:43:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Policy service should respond in under 100ms [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:55:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º LLM service should respond in under 100ms [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:67:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Service Latency â€º Analytics service should respond in under 100ms [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\performance.spec.ts:104:9 â€º Critical Requirement: Performance (Auth < 100ms) â€º Performance Baseline â€º All services should be operational [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:7:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-User Rate Limiting â€º Should track requests per user [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:105:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Per-Endpoint Rate Limiting â€º Should apply endpoint-specific limits [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:151:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Time-Window Rate Limiting â€º Should reset limits on time window [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:203:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Headers â€º Should include rate limit information in response headers [39m
[31m    [webkit] â€º apps\api-e2e\src\critical-requirements\rate-limiting.spec.ts:250:9 â€º Critical Requirement: Rate Limiting (4-Dimensional Guards) â€º Rate Limit Protection â€º Should protect against denial of service [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:120:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with llama2 model [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:162:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with mistral model [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:194:9 â€º Model Switching and Multi-Model Queries â€º Single Model Query Execution â€º Should execute query successfully with neural-chat model [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:228:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should switch between all 4 models and execute queries [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:281:9 â€º Model Switching and Multi-Model Queries â€º Model Switching with Sequential Queries â€º Should maintain model state across consecutive requests [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:316:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should return valid response structure from each model [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:357:9 â€º Model Switching and Multi-Model Queries â€º Model-Specific Response Validation â€º Should include model identification in response [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:424:9 â€º Model Switching and Multi-Model Queries â€º Error Handling and Edge Cases â€º Should validate model selection required [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:445:9 â€º Model Switching and Multi-Model Queries â€º Performance with Model Switching â€º Should handle rapid model switches under 2 seconds per query [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:476:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should complete full user workflow: list models > select model > generate query [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\model-switching.spec.ts:551:9 â€º Model Switching and Multi-Model Queries â€º Integration: Frontend Model Selector Scenario â€º Should persist selected model in UI state across multiple queries [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:141:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should complete inference within timeout window [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:182:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should handle concurrent inference requests [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:231:9 â€º E2E Resilience & Error Recovery â€º Timeout & Performance Handling â€º Should rate-limit excessive requests appropriately [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:282:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should maintain consistent user data across auth and analytics [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:340:9 â€º E2E Resilience & Error Recovery â€º Data Consistency Across Services â€º Should track inference requests with correct user context [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:429:9 â€º E2E Resilience & Error Recovery â€º Service Failure Isolation â€º Should gracefully degrade when LLM service is unavailable [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:480:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should maintain session across multiple requests [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\resilience-and-recovery.spec.ts:519:9 â€º E2E Resilience & Error Recovery â€º Session & Token Management â€º Should prevent token reuse after expiration [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:79:9 â€º E2E Telemetry & WebSocket Validation â€º Event Telemetry Pipeline â€º Should capture inference execution events [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:177:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should include required telemetry fields [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:221:9 â€º E2E Telemetry & WebSocket Validation â€º Telemetry Data Quality â€º Should correlate events with user session [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:356:9 â€º E2E Telemetry & WebSocket Validation â€º WebSocket Stability (Real-time Events) â€º Should report ready status when dependencies available [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\telemetry-validation.spec.ts:425:9 â€º E2E Telemetry & WebSocket Validation â€º End-to-End Message Flow â€º Should flow events through complete pipeline [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:7:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full registration workflow [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:43:9 â€º E2E Workflows â€º User Registration & Login Flow â€º Should complete full login workflow [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:92:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should execute complete query workflow [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:139:9 â€º E2E Workflows â€º Query & Inference Workflow â€º Should support multiple queries in session [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:197:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should coordinate between auth and inference services [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:242:9 â€º E2E Workflows â€º Cross-Service Integration â€º Should maintain session across services [39m
[31m    [webkit] â€º apps\api-e2e\src\workflows\user-journey.spec.ts:370:9 â€º E2E Workflows â€º Error Handling & Recovery â€º Should handle invalid requests properly [39m
[32m  114 passed[39m[2m (2.6m)[22m



 NX   Running target test for 5 projects failed

Failed tasks:

- api-e2e:test

